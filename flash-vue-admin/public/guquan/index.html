<!DOCTYPE HTML>
<!-- saved from url=(0178)https://www.qcc.com/company_guquan -->
<!DOCTYPE html PUBLIC "" "">
<HTML lang="en">

<HEAD>
    <META content="IE=11.0000" http-equiv="X-UA-Compatible">

    <META charset="utf-8">
    <META http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <META name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <META name="renderer" content="webkit">
    <META name="author" content="leslie">
    <TITLE>公司股权穿透-雅居乐</TITLE>
    <LINK href="./images/favicon.png" rel="icon">
    <LINK href="./files/bootstrap.css" rel="stylesheet" type="text/css">
    <LINK href="./files/font-awesome.min.css" rel="stylesheet" type="text/css">
    <LINK href="./files/icon.css" rel="stylesheet" type="text/css">
    <LINK href="./files/font.css" rel="stylesheet" type="text/css">
    <LINK href="./files/app.css" rel="stylesheet" type="text/css">
    <LINK href="./files/common.css" rel="stylesheet" type="text/css">
    <LINK href="./files/nuser.css" rel="stylesheet" type="text/css">
    <LINK href="./files/simple-line-icons.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="./css/app_ie8.css?time=1508428800" type="text/css" />
    <script src="./js/html5shiv.js"></script>
    <script src="./js/respond.js"></script>
    <![endif]-->

    <SCRIPT src="./files/siteconfig.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.min.js"></SCRIPT>

    <SCRIPT src="./files/qrcode.min.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.scrollTo.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.qrcode.min.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/bootstrap.js"></SCRIPT>

    <SCRIPT src="./files/echarts.min.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/china.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/chartsUtil.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/kslide.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/searchList.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/phoneSelect.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.slimscroll.min.js"></SCRIPT>
    <LINK href="./files/toastr.css" rel="stylesheet">
    <SCRIPT src="./files/moment.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/toastr.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/custom.js"></SCRIPT>

    <!-- <SCRIPT src="./files/zhuge.js" type="text/javascript"></SCRIPT> -->

    <SCRIPT type="text/javascript">
        var zhugeIdentify = {
            name: '柳下鸿哲',
            groupid: '11',
            client_type: '0',
            mobile: '15365067296',
            email: '',
            regist_time: '2019-11-22 16:14:22'
        };
        var vipStartTime = '0';
        if (vipStartTime) {
            zhugeIdentify.vip_start_time = '-';
        }
        //window.zhuge.identify('2972f7c3461753f9e13f6f8486a8b270', zhugeIdentify);
        var userId = '2972f7c3461753f9e13f6f8486a8b270';
        var userGroupid = '11';
        var freeCompanies = ["234939362", "234918766", "234869620", "234862605", "234637704", "234609748", "234574018", "234562348", "234552748", "234321036", "234291314", "234262338", "234257777", "234251384", "234048899", "234030743", "233994738", "233986592", "233982296", "233759644", "233742429", "233695732", "233682207", "233679277", "233003766", "232989162", "232965219", "232960002", "232954883", "232706275", "232684453", "232662034", "232569641", "232566461", "232273127", "232231774", "232228097", "232221827", "232012556", "231990504", "231988264", "231958617", "231952753", "231740000", "231690479", "231686307", "231675898", "230899046", "230832426", "230797696", "9cce0780ab7644008b73bc2120479d31"];
        var freePeople = ["pbd14c1a830af087a22e664b211111a2", "pc127c37072772dabd4865bd62459891", "p5a60350edce8397a6eb99586764df6c", "p978989c01e93131c12993d545f2a805", "pf010017726a2628c831d6cbb0436c36", "pdd3325c48473fcd64180921d82ead80", "p3483c261f318de061fb3ded0508bf90", "p131e16ad01343fa580933ad37cd33cb", "pb33e378f9e599ee567427013a9f7bb7", "pc4eb763297cf4b8076c2e0d2fe64617", "p18da2d9c2244c6dba4180f0d38a7716", "p684b3f0c79b5dfe6d8a290ba66e798a", "p0da1fd62398858e47435903170d20f6", "pa21c9d253848f65999adb9011ed7d11", "pc0afc496a38fb16121ba654241bee5b", "p3c079565c938f4cf1fbb67d12659699", "pceb56d68d90e7b0806f41be5b30465b", "pd2933208c88b6efca1fb5303b877ebe", "p9fa343b3bb5216b246c72aeb77bce0c", "p3020b07f7c882686d412e03afd0b8d8", "pe179d3e46284bd6722d9736c0d01d8d", "p32d88b0b48cd2bbcd9d4f29b1b1670d", "pf039a59293c9b34b8aadeae1f02e37a", "p51c67c0da117b30f540821e1f925506", "p8fcd766a0146ad33f6b4773ce215116", "p67d2355b8ca06b442eda7b5a55b4803", "p3dce701cfd944fa25b0815582835c4f", "pc464dd4c2d1df467ac4fb6b35dd5a94", "p5bc9fe5f2c93301052dc39453855dde", "p81f560aded586c166f5014db3919ebd", "p4b4fda0151ace817f4c79746530eca1", "p904b82f5b0df193c45ee2167277281b", "pae421fa552b216a2ac67f6168d67a38", "p208cb12d979ef569739bd8753ce6649", "p0fdcfa8108bd10d18026d7a6186e8a0", "p0ab2e77de0027adc611b908d12b73ea", "pad4ad4c3b995c633a39ae06c899f18a", "pbf3da456127e996c276a5bf220c7152", "pb3cc3d6e608758fad83c053f6f7d8f1", "pbfcfb2db5d738323c168f5e3c16db49", "pcbfd37ad2a2598da9a6b5de289835dd", "pbfd190fa68be5988ff53ae9c1fb75e7", "p6abbf243fc5557f96d4488fde8a89f5", "p202afa75ec282beabae2dd5d1f8e521", "pf38ddce3220b4e7c2c7ead12a534403", "p476184110a69c8ab1e6f1bf32506f07", "peff4efbd8aaa94d852a42d6bd4f622e", "p03d87fd320f2167380bf07ac16794e9", "p077472cd738bf6c70d757a42c6acaf4", "p2dc826c24f06db3e6cb207b2a494533", "p7b171afb629657b151c43bf3e718155", "pe19e4c219613e43e5ef8816e3b34291", "pf7f4dc246a163ec4a2eedbb67764f7f", "paf1c4d41c4c9dcba9a7b1c986957935", "pc76b9853c3325d7b5ea9d8af2fa0fca", "pd24f0e6c29ec7afe56cac57d665a70b", "pfffdf5c707f4ba7162eebd404630418", "p51425b4e76d82435b0dfb1192bc5deb", "p80a2115e4c716ca032ced9f007af2c8", "p8b780c0b5697bb1daa669804aa071d9", "p91f92d0f783be4faba5935904f6e2e1", "pbaffdb371282141ce912ea1ba440bcd", "p50ccd2810b29b8f5ea618cee02ed02e", "p7a226f4f0462f27a7ec88903ed5f90a", "p33f9ba51dbd068643200f2315655900", "pf26740c52b73dbc30c0b8bd40a38021", "p441efd3807a065c24de74b5b4be3b5d", "p089070bd9e914e774ef3e95d00ec5b0", "p443d6a190278796f7930982dfe73f42", "p2f4391f2600fcc10442c8f22606be20", "p146c9f00d63c0fc5e1d4634c917889e", "pd260c6712ed49ee88504a64c5ed9482", "p347ca283005d596e26b5705fe3e5424", "p25fe19b03899303d307235eaa471916", "pr51b8951f1049973a8ba758266b6779", "p871b2ad73b8b07e3997b0db7fcf9772", "p226df53c2baa849d6934a9089085ebf", "pc4a47cfe2e67199a3c45d9f8c40e1c0", "p593208d3aa8e49707325de214a8cb60", "p557b82fef8b08e481aadb65085b008b", "p04609ece9fe504be41433742c1bf3eb", "p522e021cee9336bfb6097250baa3e1b", "p568dbf4e82ed6effd2ea1682c7943b8", "p089070bd9e914e774ef3e95d00ec5b0", "p82222ef85bfd379a8e5226dadc543dd", "p287aa836f4e2c3c6597d09f37731f85", "p858a1f2f2e7864fac8d3acce4c8bb8f", "p8cb6c16db2ea8fac8ecaadefe35ff8b", "p6b2cf613dd4772da8ff3a9575eec8bf", "p0b1f20c4c28963ace6eff596cbb7214", "pfd208a680dc4871736b7001274ba8f0", "pbbefb7a246f4e86a033713e889f9674", "pe366442cb673caf54889e6df853e0c0", "pf6ea929da129db627bfcf9bf48edc65", "p1856f2582e91cf6869be9652cf91512", "pde0ba11f9cc81e8e22b89d378dd597b", "pe919b2bf2e9c6cdd24d8b63f5969fdd", "p2aa27bc385916cab483ba92ec9226ea", "p38b6a9f4201932948f613f90ab24cdd", "p0e6f9e9a26a0e41c4a3f9be7c062ef2", "p9070853c3d33d38134c64a156989284", "pbccd0d3eb5ada9952e52772f9e54ebe", "p79bb7b0dd3f36e6e5f5100c4e3235a9", "pr9c47cb6b2a96048c1d49d1ec72b3c7", "p89c2161a36e89cd81bc47424c28ae5b", "pae9614885f6fe1df986a5657337915a", "p375870fa646d110dde4fbe356f1913e", "p0d43bf24ced3d482947792b410b3892", "p2766646c26fb8bf53f01c17c0cd1a7e", "peabcad582bff5cc35feddb8a2dca458", "p9e7818eb8ffc10380ddeb37549c3594", "p62f5e7603c2870f0316e439db89d33e", "p8bb365678cceb173c3f6645fac32463", "pd7d02c68b11c928bc5c5f3f68a43bd8", "pd99973e6e867199057f35891f10ece9", "p5bc1e3c3f62ed3437786bc969600b9a", "pdc2b7a3cc2c414b3910a1d9e116567a", "pa884808a0e7526dd17a682739cb38ec", "p0b093ef01998ca26f345d4231003a9b", "pa85a527d51f75da260083b1cf98da24", "p24129f60d16a9d20e70f29452341dec", "p507f1693d86036364ec3b5b4d3c0639", "p60d00d52bf712741e2fc7f435a31302", "p4609f5b766b75d4ab09180fa954da02", "p6da28fd74891226f20838f3900fad36", "pa43fd5c3172044465f25069df6e61b8", "p59505f16bf59533fee6f2c27c5b2355", "p189c9b0f7e004118b9484f47e6cda68", "p96fe6a8b395b31912ecb7e1f41f23b0", "pea5ac417585edc0effd7d23406510da", "pd57e12ca20e0096dfea61993dfe48f8", "p03cf330a686332cfe9cb8f36a8f3ab8", "p8ca4283fb80cf988920545e99aef3a4", "p1910534b4ae98fea35ddbeb1d61cd44", "pb5d99e1912cf2b87f96c7fdaa129ebe", "pb6f2f51a297e57acd8a8a161a6a28bc", "p70e7789ba2d4e8172cc4fec474711fb", "p6609596e149d5bc0201a0b9f4e4fcb7", "pb7beff14c56b6f216f92ad95d874f51", "pad06603add12c231e78caab20a05f6c", "p411cb5d3d6a3399aa210df8845090ea", "pf614487a898ad76c39ec0fc65ec3d4f", "p954d6bbb51b05a8b3f91e51e79901a9", "p5b288352cf3b9499b9271bf888008df", "p0ca25440e7114c5974d01d583e52b00", "pc747a2d6aaa24efad55793147bc7987", "p2a2c9a1417dfff19e607aa3b30787b9", "p44cb4832f4146f286a2c5c4ab4ef673", "p7cb6f77da9f15766cb65765761c9d19", "p38bfd08992f02ba2a136ca892d62899", "pd05b697b081dcb4e66719032c2cc760", "p61fbfc3a108d8efaf565de1306e23a0", "p21c63257afca04e61ff32ac5580572a", "p1ec3c35fa9051d8723047b80453ae69", "p9d9efeb5aa665dbe66525ced8158f90", "pb0489d8530decee9a061f3be5732844", "p4bcf05c17b1b0918890fe3a5e64d41f", "pfa52806be628929568e0dcbd943d57e", "p30833a0589ab2f56f93bd113bbaf9bd", "pdd9194581da5dda4f700baebc44cc31", "pf21af25ef345c47daa9e738732edfa6", "pe553922ca919d6a7258c4056e2ab6b7", "p7737993e45432ed0e721b28267e058a", "p6fb279283ceeba19fe9e85acf4c1f7e", "p784a2184d94be1818b6d522b5c8a9d9", "pd9751940a8bdcf373ae27804f29c12a", "pa313dc90dffce21f98187ca8b1eaa15", "p8c945c9f031c2fa391208aeb9a63777", "pf1e6aed975eb577cb46d51ac7ec3f14", "pb85b223185323f8cc668b7146ddaba9", "p4b2c9d74f0a53dc7834fb9aaed58bfd", "p84c368f313b4d0808e3fb8ca36e10ad", "p917b446e33f719e683fa127465c03bc", "p14811e6d3e3c6380ce34dc64d6bb0c2", "p325ad0d3c574b124e802f3ad612b7bd", "pb46f67ed928d48c6f59af057ca64fcf", "pc5e58ea25a0966d860efa862e64a4b3", "p0cf2da4ed6ccd9fff31cd232bd3a795", "p2bf510b2944458716d0a263913866f1", "p2bfa369c340fc42e4c408a98f0a1f26", "p4f92d97100bd868d73fa62e9ce00b28", "p592a5a06fd6d1ffa4a204e0c499de24", "pa289f26dbfa128c37beb57b793edc79", "pf410cc5e6bf73d7a117de49a7b1af5e", "p2c045fc38d5bec1d438cc581e0f86a4", "p89043bad02f62e899855bceb1f7c71b", "pr4c963d26e89c8fff17daf449668e16", "p8cf7445cd8c5956c7480f1d507b2cd1", "p885609c358d14e07fd99d41ed314e99", "p57180cc2a70271694f52740d0d9ae1b", "p4a6bb86866883881d5f7005f861f7a4", "p57153b6ab8750d1dfd32b0c56f398d1", "p556225ea3e000a06e4a35f2bdf18481", "p1c907e22aaff36740ea8f603b901b32", "p412cd235e5252a1c8b90705bf19fbcb", "p0b9468faca13fb6100df091d20297f1", "pb4e17e90f7c1cfa54560ac4fe041db6", "p6c7313d1a025112e8778dfeedc0ffe1", "pc491219acf1f61a59c04dea39bedfa5", "p5bb4cb536f8904b937650ecbac0b94a", "p26b2932ed1a63519bb81e44ba8c104c", "pd3f1646db9a01cea29c61c33b9ee617", "p64df099fa4661b4d400c5896a39681b", "pd923a5cc21dfac7fdbf9dfa9c6fa533", "pc97d58fb9ac9bd3836bbe07fdd2735a", "p0248c4f7a28bc236748fc4610b5ef1d", "p4caa8eb789c5d0fe7d6a88b0dc9000c", "p4f2b6e1ae6b40edafecde1c73e85cd2", "p056aab2e73f92dbcebd51da8111c1ac", "pr894be363cef980d10af39d88a85398", "p0794177a7df688a3c779b7408edebf0", "pf9ec94f17dc07af1ecd3409f3523f6d", "pbb6cbd616af10953b12db428bd7af9d", "p7e22dafa4d6ee1193820480fed43953", "p067936c7397b739ec6b0d297b95ec06", "pr0a8298f7c230bf5fc40124625a7d1c", "p8718f47f94756d94d3933ea806b76c3", "pfe71e70a5951f48e2d6be8134a69ab9", "p7c5ca3749112d3339c2c5c20751702c", "p7b541f7db2eea4e9d2069d7329d1766", "pf559e9748951e5c469d144da6fd5c8c", "p74c5e42ade7e0a0c94badba92f5a66b", "p892fd42c420a158abbdb899f7b199c4", "p26bf4d581bdf25dd5dce172689be1cf", "p5585fa223b46d1250fcadaf6a74bc70", "p32c772c9801cf98b711e952902ba2ce", "pb92c1a7e84cf6ff79b254154d1eda17", "p627634414f75aa172f1623c6d909bb5", "p418e3e56998a8e8237a551840a9976d", "pa8379689f22cb9c588dadacbac3bd90", "p3a8634f7b3ad183f6f31b9123868dce", "pr796baa55fffb4891c66c5cadf93242", "p686bfc2eccc4011491c9a1ddbc7609e", "p1b1e565d80a051007b8d18f17e07e05", "p9a719fb3a18f289340fd0c43c356839", "p91e374fa50b4648e9911d941ece2b82", "p824b008f59b9e5d89842ea9bd529587", "pff44c7629a4b0a2bf96eea21a63f1f7", "p3fb6d0bed1bd2c96b172f77c97846f4", "p1fdaf8e212811fb8edd33781d84b24d", "p4150ff74059ca6c582cb6151ff9718b", "p10ff32f62339a56dee86d3a362ee8b2", "pf28d61dd4cd96570757734940a28c55", "pr0ac1235cf5613a979f9c28dc920302", "p436160a297843d6312902a0049665d1", "p196fb6607ce39e7e2156b254a9e54d0", "p283698248c8c18693974f0ed8e2c488", "p1910534b4ae98fea35ddbeb1d61cd44"];
    </SCRIPT>

    <SCRIPT type="text/javascript">
        var qrcodePolling = false;
    </SCRIPT>

    <META name="GENERATOR" content="MSHTML 11.00.9600.19180">
</HEAD>

<BODY>
    <HEADER style="display: none;" class="header navi-header box-shadow ">
        <DIV class="container">
            <DIV class="navi-brand"><A class="logo" onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'LOGO'});"
                    href="https://www.qcc.com/"><IMG class="m-r-sm" alt="雅居乐" src="./files/logo4.png">
                </A><SPAN class="zx"><SPAN class="inner"><IMG alt="企业征信机构备案" src="./files/logo_zx_inner.png">
                    </SPAN> </SPAN></DIV>
            <FORM class="navi-form" role="search" action="&#10;            /search">
                <DIV class="form-group">
                    <DIV class="input-group"><A class="clear-searchkey" id="clearSearchkey"></A>
                        <INPUT name="key" class="form-control headerKey" id="headerKey" type="text" maxlength="1000"
                            placeholder="请输入企业名称、人名、产品名等，多关键词用空格隔开" value="" autocomplete="off">
                        <SPAN class="input-group-btn" style="float: left;"><BUTTON class="btn btn-primary" onclick=""
                                type="submit">查一下</BUTTON> </SPAN> </DIV>
                </DIV>
                <SECTION class="panel headerKey header-section" id="header-search-list"></SECTION>
            </FORM>
            <SCRIPT type="text/javascript">
                $('#headerKey').searchList({
                    list: '#header-search-list',
                    clear: '#clearSearchkey',
                });
            </SCRIPT>

            <SCRIPT type="text/javascript">
                var pathname_ = window.location.pathname;
                if (pathname_ == '/search_riskinfo' || pathname_ == '/search_intellectualinfo') {
                    $('#tpsearch').attr('action', pathname_);
                }
            </SCRIPT>

            <UL class="navi-nav pull-right ">
                <LI class="dropdown appli-drop"><A class="dropdown-toggle" onclick="zhugeTrack('顶栏按钮点击',{'应用名称':'应用'});"
                        onmouseenter="getApplicationList();"
                        href="https://www.qcc.com/company_guquan?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=%E9%9B%85%E5%B1%85%E4%B9%90%E5%9C%B0%E4%BA%A7%E7%BD%AE%E4%B8%9A%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8#"
                        data-toggle="dropdown"><SPAN class="icon-appli" style="display: none;"></SPAN>
                        <I class="nav-icon-hot"></I>应用 <I class="caret"></I> </A>
                    <SECTION class="dropdown-menu app-box applicationList"></SECTION>
                </LI>
                <LI class="head-line">|</LI>
                <LI><A class="dropdown-toggle header-qrcode" onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'APP下载'});"
                        href="https://www.qcc.com/web/app" rel="nofollow">APP下载
                    </A>
                    <SECTION class="dropdown-menu qrcode-box"><IMG src="./files/header_qrcode@2x.png">
                    </SECTION>
                </LI>
                <LI class="head-line">|</LI>
                <LI>
                <LI><A onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'VIP服务'});" href="https://www.qcc.com/vip?vf=1"
                        rel="nofollow">VIP服务</A></LI>
                <LI class="head-line">|</LI>
                <LI><A onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'企业套餐'});" href="https://www.qcc.com/qiye"
                        rel="nofollow">企业套餐</A></LI>
                <LI class="head-line">|</LI>
                <LI class="dropdown msg-drop"><A onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'消息'});"
                        href="https://www.qcc.com/msg"><IMG alt="消息中心" src="./files/ic_noti.png">
                    </A>
                    <SECTION class="dropdown-menu msg-box">
                        <UL class="list-group m-b-none">
                            <LI class="list-group-item">
                                <DIV class="he">消息中心（ <SPAN class="text-danger unreadmsgnum">0</SPAN>
                                    条未读）</DIV>
                            </LI>
                            <LI class="list-group-item">
                                <DIV class="pnodata"><IMG src="./files/nno_image.png">
                                    <P>暂无消息</P>
                                </DIV>
                            </LI>
                        </UL>
                    </SECTION>
                </LI>
                <LI class="dropdown user-drop"><A style="padding-left: 5px;"
                        onclick="zhugeTrack('顶栏按钮点击',{'按钮名称':'个人中心'});" href="https://www.qcc.com/user_home"
                        rel="nofollow"><SPAN id="hbuser"><SPAN class="headface"><IMG
                                    onerror="this.src='./images/icon_user2_default@2x.png'" alt="个人中心"
                                    src="./files/42.jpg"> </SPAN>
                            柳下鸿哲
                            <B class="caret"></B> </SPAN> <SPAN id="hfuser" style="display: none;">
                            个人中心 <B class="caret"></B> </SPAN>
                    </A>
                    <UL class="dropdown-menu nav-user">
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'风险动态'});"
                                href="https://www.qcc.com/monitor_dynamic">
                                风险动态</A></LI>
                        <LI class="divider"></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'浏览历史'});" href="https://www.qcc.com/user_visit"
                                rel="nofollow">浏览历史</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'导出记录'});"
                                href="https://www.qcc.com/user_download" rel="nofollow"> 导出记录</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'账户余额'});"
                                href="https://www.qcc.com/balance_manage">
                                账户余额</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'优惠券'});"
                                href="https://www.qcc.com/user_coupon">优惠券</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'我的企业'});"
                                href="https://www.qcc.com/user_company" rel="nofollow"> 我的企业</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'我的关注'});"
                                href="https://www.qcc.com/user_follow">
                                我的关注</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'我的收藏'});" href="https://www.qcc.com/user_fav">
                                我的收藏</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'我的订单'});"
                                href="https://www.qcc.com/order_manage?type=service">
                                我的订单</A></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'我的发票'});"
                                href="https://www.qcc.com/user_invoice">我的发票</A></LI>
                        <LI class="divider"></LI>
                        <LI><A onclick="zhugeTrack('个人中心下拉菜单点击',{'按钮名称':'退出登录'});"
                                href="https://www.qcc.com/user_logout">
                                退出登录</A></LI>
                    </UL>
                </LI>
            </UL>
        </DIV>
    </HEADER>
    <SCRIPT src="./files/jquery.cookie.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.validate.min.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/jquery.form.min.js" type="text/javascript"></SCRIPT>

    <SCRIPT src="./files/global.js" type="text/javascript"></SCRIPT>
    <LINK href="./files/companyDetail.css" rel="stylesheet" type="text/css">
    <STYLE type="text/css">
        html,
        body {
            height: 100%;
            background-color: #fff;
        }

        .mao-main {
            width: 100%;
        }

        .stock-name {
            color: #fe5151;
        }

        .water-mark {
            position: absolute;
            z-index: 15;
            font-size: 12px;
            color: #aaa;
            text-align: center;
            width: 100%;
            bottom: 20px;
        }

        .bsBox,
        .bsBox * {
            box-sizing: content-box;
        }
    </STYLE>

    <DIV style="display: none;" class="mao-head whitebg">
        <DIV class="container">
            <UL class="mao-title breadcrumb" style="background: none; border: currentColor; border-image: none;">
                <LI><A href="https://www.qcc.com/firm/e2bec6259ce8247abc479434d99233b2.html"><IMG
                            src="./files/ic_reply.png"> <A class="text-primary"
                            href="https://www.qcc.com/firm/e2bec6259ce8247abc479434d99233b2.html">
                            雅居乐地产置业有限公司 </A> </LI>
            </UL>
            <UL class="mao-nav" id="navTab">
                <LI><A onclick="zhugeTrack('图谱页面-企业图谱')"
                        href="https://www.qcc.com/company_newgraph?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=雅居乐地产置业有限公司">企业图谱</A>
                </LI>

                <LI><A onclick="zhugeTrack('图谱页面-企业受益股东')"
                        href="https://www.qcc.com/company_beneficiary?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=雅居乐地产置业有限公司">企业受益股东</A>
                </LI>

                <LI><A onclick="zhugeTrack('图谱页面-关联方认定图')"
                        href="https://www.qcc.com/company_glfgraph?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=雅居乐地产置业有限公司">关联方认定图</A>
                </LI>

                <LI><A onclick="zhugeTrack('图谱页面-关系图谱')"
                        href="https://www.qcc.com/company_muhou3?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=雅居乐地产置业有限公司">关系图谱</A>
                </LI>

                <LI class="active"><A onclick="zhugeTrack('图谱页面-股权穿透图')"
                        href="https://www.qcc.com/company_guquan?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=雅居乐地产置业有限公司">股权穿透图</A>
                </LI>

                <LI><A onclick="showVipModal('疑似实际控制人','成为VIP会员即可查看疑似实际控制人  总股权比例等信息','');">疑似实际控制人</A>
                </LI>
            </UL>
        </DIV>
    </DIV>
    <DIV style="display: none;" tabindex="-1" class="modal fade" id="reportModal" role="dialog" aria-hidden="true"
        aria-labelledby="myModalLabel">
        <DIV class="modal-dialog nmodal report-modal">
            <DIV class="modal-content ">
                <DIV class="modal-header"><BUTTON class="close" type="button" data-dismiss="modal"><SPAN
                            aria-hidden="true">×</SPAN><SPAN class="sr-only">x</SPAN></BUTTON>
                    <H4 class="modal-title">下载报告 </H4>
                </DIV>
                <DIV class="modal-body"></DIV>
            </DIV>
        </DIV>
    </DIV>
    <SCRIPT type="text/javascript">
        function showReportModal(branchCompanyCode, name, goodsid) {
            var paramData = {
                branchCompanyCode: branchCompanyCode,
                name: decodeURI(name),
                goodsid: goodsid,
                isNew: 1
            }
            $.ajax({
                url: INDEX_URL + '/report_reportlist',
                data: paramData,
                dataType: 'html',
                success: function (html) {
                    $html = $(html);
                    $('#reportModal .report-modal').addClass('dan');
                    $('#reportModal .report-modal').addClass('tupu');
                    $('#reportModal .modal-body').html($html);
                    $('#reportModal').modal('show');
                }
            })
        }
    </SCRIPT>

    <DIV class="mao-loading" id="load_data"><IMG src="./files/preloader.gif">
    </DIV>
    <DIV class="mao-nodata" id="no_data">
        <DIV class="guquan-lnodata pnodata"><IMG src="./files/nno_image.png">

            <P>没有找到相关数据</P>
        </DIV>
    </DIV>
    <DIV class="mao-screen-area" id="screenArea">
        <DIV class="mao-main" id="main"></DIV>
        <DIV class="tupu-toolbar">
            <UL>
                <LI id="changeScreen" onclick="changeScreen(this);"><SPAN class="screen"></SPAN>全屏</LI>
                <LI id="extendItem" onclick="extendItem(this);"><SPAN class="extented"></SPAN>展开</LI>
                <LI onclick="maoScale(1);"><SPAN class="big"></SPAN>放大</LI>
                <LI onclick="maoScale(2);"><SPAN class="small"></SPAN>缩小</LI>
                <LI onclick="maoRefresh();"><SPAN class="refresh"></SPAN>刷新</LI>
                <LI onclick="saveImg();zhugeTrack('图谱-保存',{'图谱类型':'股权穿透图'});"><SPAN class="save"></SPAN>保存</LI>
                <LI onclick="editRect(this);"><SPAN class="sel"></SPAN>编辑</LI>
            </UL>
        </DIV>
        <DIV class="water-mark">股权穿透图由雅居乐集团基于公司信息利用大数据分析引擎独家生成</DIV>
        <DIV style="display:none" class="company-detail tp-detail" id="company-detail">
            <DIV class="e_close-bar"><SPAN class="ea_title">公司信息</SPAN> <SPAN class="ea_close"
                    onclick="popclose(this)">×</SPAN> </DIV>
            <DIV class="detail-content-wrap">
                <DIV class="e_pop-detail-top">
                    <DIV class="ea_left"><IMG class="mao-img" onerror="this.src='./images/default_face.png'"
                            src="./files/default_face.png"> </DIV>
                    <DIV class="ea_right">
                        <DIV class="ea_row1"><A class="ea_name-com mao-company-name" target="_blank">-</A></DIV>
                        <DIV class="ea_row2"><SPAN class="text-gray">法定代表人：</SPAN><A class="mao-oper">-</A></DIV>
                        <DIV class="ea_row2"><SPAN class="text-gray">注册资本：</SPAN><SPAN
                                class="text-black mao-ziben">-</SPAN></DIV>
                        <DIV class="ea_row2"><SPAN class="text-gray">成立日期：</SPAN><SPAN
                                class="text-black mao-date">-</SPAN></DIV>
                    </DIV>
                </DIV>
                <DIV class="m-t"><A class="btn mao-tupu-link" target="_blank">查看图谱</A> </DIV>
                <DIV class="m-t mao-content m-b-lg">
                    <UL class="nav nav-tabs mao-tabs">
                        <LI class="active"><A role="tab" aria-controls="gudong"
                                href="https://www.qcc.com/company_guquan?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=%E9%9B%85%E5%B1%85%E4%B9%90%E5%9C%B0%E4%BA%A7%E7%BD%AE%E4%B8%9A%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8#gudong"
                                data-toggle="tab">股东</A></LI>
                        <LI><A role="tab" aria-controls="touzi"
                                href="https://www.qcc.com/company_guquan?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=%E9%9B%85%E5%B1%85%E4%B9%90%E5%9C%B0%E4%BA%A7%E7%BD%AE%E4%B8%9A%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8#touzi"
                                data-toggle="tab">对外投资</A></LI>
                        <LI><A role="tab" aria-controls="member"
                                href="https://www.qcc.com/company_guquan?branchCompanyCode=e2bec6259ce8247abc479434d99233b2&amp;name=%E9%9B%85%E5%B1%85%E4%B9%90%E5%9C%B0%E4%BA%A7%E7%BD%AE%E4%B8%9A%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8#member"
                                data-toggle="tab">主要成员</A></LI>
                    </UL>
                    <DIV class="tab-content mao-tab-content">
                        <DIV class="gudong-list tab-pane fade in active" id="gudong" role="tabpanel"></DIV>
                        <DIV class="touzi-list tab-pane fade" id="touzi" role="tabpanel"></DIV>
                        <DIV class="member-list tab-pane fade" id="member" role="tabpanel"></DIV>
                    </DIV>
                </DIV>
            </DIV>
        </DIV>
        <DIV style="display:none" class="company-detail tp-detail" id="person-detail">
            <DIV class="e_close-bar"><SPAN class="ea_title">人员信息</SPAN> <SPAN class="ea_close"
                    onclick="popclose(this)">×</SPAN> </DIV>
            <DIV class="detail-content-wrap">
                <DIV class="e_pop-detail-top">
                    <DIV class="ea_left"><IMG id="face_oss" onerror="personImgErr()" alt="">
                        <DIV class="ea_defaultImg"></DIV>
                    </DIV>
                    <DIV class="ea_right">
                        <DIV class="ea_row1"><A class="ea_name">-</A><A class="text-warning allRrelative"
                                target="_blank">关联<SPAN class="relativeInfoCount">0</SPAN>家企业&gt;</A></DIV>
                        <DIV class="ea_row2"><SPAN class="text-gray">企业：</SPAN><A class="text-blue" id="PerCom"
                                target="_blank">-</A></DIV>
                        <DIV class="ea_row2"><SPAN class="text-gray">职位：</SPAN><SPAN class="text-black"
                                id="PerJob">-</SPAN></DIV>
                    </DIV>
                </DIV>
                <DIV class="m-t"><A class="btn mao-tupu-link" id="ShowPerTupuA" target="_blank">查看图谱</A> </DIV>
                <DIV id="NameBar">简介</DIV>
            </DIV>
        </DIV>
    </DIV>
    <DIV class="tooltip-inner" id="hoverName" style="display: none; position: absolute; z-index: 100;"></DIV>
    <SCRIPT src="./files/echarts2.js"></SCRIPT>

    <SCRIPT src="./files/jquery.slimscroll.min.js"></SCRIPT>

    <SCRIPT type="text/javascript">

        var myChart;
        var showbranchCompanyCode;
        var Text = require('zrender/shape/Text');
        var ImageShape = require('zrender/shape/Image');
        var Rectangle = require('zrender/shape/Rectangle');
        var treeId = 1;
        var _currentbranchCompanyCode;
        var canEditRect = false;
        var mbtnW = 18;
        var isExtend = false; // ture 为关闭子节点 false 展开全部节点

        $(document).ready(function () {
            resizeScreen();
            var enterpriseCode = getQueryVariable('id')*1 || 1
            myChart = echarts.init(document.getElementById('main'));
            //new window.zoomutil({dom: $('#mainGuquan')[0], chart:myChart}); // add zoomutil feature
            //getRootData(enterpriseCode);
            getData(true);
        });

        window.onresize = function () {
            resizeScreen();
        }
        var rootData;  // 根节点数据
        var gudongData={}; // 股东信息数据
        var touziData={}; // 投资公司信息数据



        function getData(isClose) {
            var enterpriseCode = getQueryVariable('id')*1 || 1
            $('#load_data').show();
            getInvestData(enterpriseCode, isClose);
            getCapitalData(enterpriseCode, isClose);
        }

        // 获取股东的相关信息
        function getCapitalData(enterpriseCode, isClose) {
            $('#load_data').show();
            var url = INDEX_URL+'/lpm/capital/tree?page=1&limit=1000&enterpriseCode=' + enterpriseCode;
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'JSON',
                success: function (data) {
                    $('#load_data').hide();
                    if (data && data.data.length>0 && data.success) {
                        console.log(data)
                        if(data.data[0].enterpriseName) {
                            gudongData['branchCompanyName']= data.data[0].enterpriseName
                        } else {
                            gudongData['branchCompanyName']= '公司'
                        }
                        
                        gudongData['children']= data.data
                        transTree(gudongData, 1);
                        initTree(gudongData, isClose);
                        drawGuquan();
                        setTimeout(function () {
                            if(isExtend) {
                                maoScale(2)
                            }
                        }, 500);
                        

                    } else {
                        $('#no_data').show();
                        $('#screenArea').hide();
                        if (window.iframe) {
                            $('.guquan-liframe').hide();
                            $('.guquan-lnodata').show();
                        }
                    }
                }
            });
        }

        // 获取投资公司的相关信息
        function getInvestData(enterpriseCode, isClose) {
            //var url = INDEX_URL+'/lpm/invest/company/tree';
            var url = INDEX_URL+'/lpm/invest/company/tree?page=1&limit=1000&enterpriseCode=' + enterpriseCode;
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'JSON',
                success: function (data) {
                    $('#load_data').hide();
                    if (data && data.data.length>0 && data.success) {
                        $('#no_data').hide();
                        console.log(data)
                        if(data.data[0].enterpriseName) {
                            touziData['branchCompanyName']= data.data[0].enterpriseName
                        } else {
                            touziData['branchCompanyName']= '公司'
                        }
                        touziData['children']= data.data
                        console.log(touziData)
                        transTree(touziData, 2);
                        initTree(touziData, isClose);
                        drawGuquan();
                        setTimeout(function () {
                            if(isExtend) {
                                maoScale(2)
                            }
                        }, 500);
                        
                    }
                }
            });
        }

        

        // 将获取到的数据，拼装城tree组件需要的数据
        // data 为数据
        // type 为类型，1 是股东，绘制在上方， 2是投资公司，绘制在下方
        function transTree(data, type) {
            if (!data) return;
            console.log(data)
            if(data.children && data.children.length>0) {
                data.children = data.children;
            }
            
            data.treeId = treeId;
            if (type == 2) {
                data.isTouzi = true;
            }
            // 设置显示字体大小
            var fontSize = 12;

            // 根据公司状态，显示当前股权架构图中公司的状态，在企业名称前面展示
            if (data.ShortStatus == '注销' || data.ShortStatus == '吊销') {
                data.branchCompanyName = '【' + data.ShortStatus + '】' + data.branchCompanyName;
            }

            // 根据公司的是名称，进行企业文字的截取，分两种情况，企业名为中文和英文
            if (isChinese(data.branchCompanyName)) {
                if (data.branchCompanyName.length > 20) {
                    data.name = data.branchCompanyName.substr(0, 19) + '…';
                    data.ltext = true;
                } else {
                    data.name = data.branchCompanyName;
                }
                data.name = data.name.replace(/(.{10})(?=.)/g, '$1\n');
            } else {
                if (data.branchCompanyName.length > 36) {
                    data.name = data.branchCompanyName.substr(0, 35) + '…';
                    data.ltext = true;
                } else {
                    data.name = data.branchCompanyName;
                }
                data.name = data.name.replace(/(.{18})(?=.)/g, '$1\n');
            }            
            // 根据组织机构层级进行企业名称截取操作
            if (data.Org == 2) {
                if (!isEnglish(data.Name)) {
                    if (data.branchCompanyName.length > 8) {
                        data.name = data.branchCompanyName.substr(0, 7) + '…';
                    } else {
                        data.name = data.Name;
                    }
                } else {
                    var tempName = getChinese(data.Name);
                    if (tempName && tempName.length > 2 && tempName.length < 7) {
                        data.name = tempName;
                    } else if (data.branchCompanyName.length > 18) {
                        data.name = data.branchCompanyName.substr(0, 17) + '…';
                    } else {
                        data.name = data.Name;
                    }
                }
            }

            // 绘制认缴金额
            if (type == 1 && data.subscribedCapitalContribution) {
                data.subtext = '认缴金额：' + data.subscribedCapitalContribution +'万元';
            }
            if (type == 2 && data.registeredCapital) {
                data.subtext = '认缴金额：' + data.registeredCapital +'万元';
            }

            // 绘制tree的tag,在节点底部区域绘制
            if (data.branchCompanyCode) {
                if(data.Tags){
                    for(var i=0; i<data.Tags.length; i++){
                        if(data.Tags[i].Type==402){
                            data.tag = data.Tags[i].Name;
                        }
                    }
                }
            }
            // 绘制tree的tag,在节点底部区域绘制
            if (data.Tags && data.Tags.length > 0) {
                $.each(data.Tags, function (index, vo) {
                    if (vo.Type == 2) {
                        data.tag = vo.Name + ' | ' + vo.ShortName;
                        data.list = true;
                        return false;
                    } else if (vo.Type == 1) {
                        data.tag = vo.Name + ' | ' + vo.ShortName;
                        data.list = true;
                        return false;
                    } else if (vo.Type == 401) {
                        data.tag = '港股上市';
                        data.list = true;
                        return false;
                    } else if (vo.Type == 402) { // 公司所属地区
                        data.tag = vo.Name;
                        data.list = true;
                        return false;
                    }
                });
            }

            data.editable = true;
            data.symbol = 'rectangle'; //企业节点的样式为长方形
            data.symbolSize = [146, 62]; // 企业节点长度和高度
            if (data.tag) { // 如果带tag,高度增加
                data.symbolSize = [146, 82]; 
            }
            data.labelClick = true; //节点是否可点击
            // 节点的样式设置
            data.itemStyle = {
                normal: {
                    color: "#fff",
                    borderWidth: "0.5",
                    borderColor: "#0b6666", //"#0b6666",
                    label: {
                        show: true,
                        position: "inside",
                        textStyle: {
                            fontFamily: "MicroSoft YaHei",
                            fontSize: fontSize,
                            color: '#333',
                            fontStyle: "normal",
                        },
                    }
                },
                emphasis: {
                    color: "rgba(255,255,255,0)",
                    borderWidth: "1",
                    borderColor: "rgba(255,255,255,0)",
                }
            };

            // 根据组织机构类型，进行样式重写
            if (data.Org == 2) {
                data.symbol = 'rectangle';
                data.clickable = true;
                data.labelClick = false;
                data.symbolSize = [146, 62];
                if (data.tag) {
                    data.symbolSize = [146, 82];
                }
                data.itemStyle = {
                    normal: {
                        color: "#fff",
                        borderWidth: "0.5",
                        borderColor: "#FD485E",
                        label: {
                            show: !0,
                            position: "inside",
                            textStyle: {
                                color: '#333',
                                fontFamily: "MicroSoft YaHei",
                                fontSize: 14,
                                fontStyle: "normal",
                            },
                        }
                    },
                    emphasis: {
                        color: "rgba(255,255,255,0)",
                        borderWidth: "1",
                        borderColor: "rgba(255,255,255,0)",
                    }
                };
            }

            var children = data.children;
            if (children && children.length>0) {
                console.log('children---', children)
                for (var i = 0; i < children.length; i++) {
                    transTree(children[i], type);
                    children[i] = addTampArrow(children[i], fontSize);
                }
            }

            if (type == 1) {
                // 绘制股东的相关信息
                //data.kzr = true;
                // if (rootData.kzr) {
                //     if (data.branchCompanyCode) {
                //         if (data.branchCompanyCode == rootData.kzr.ControllerData.branchCompanyCode) {
                //             data.kzr = true;
                //         }
                //     } else {
                //         if (data.Name == rootData.kzr.ControllerData.Name) {
                //             data.kzr = true;
                //         }
                //     }
                // }

                // 绘制股东的持股比例
                //data.syr = data.legalRepresentative;
                // if (rootData.syr) {
                //     $.each(rootData.syr.Names, function (index, vo) {
                //         if (data.branchCompanyCode) {
                //             if (data.branchCompanyCode == vo.branchCompanyCode) {
                //                 data.syr = vo.PercentTotal;
                //             }
                //         } else {
                //             if (data.Name == vo.Name) {
                //                 data.syr = vo.PercentTotal;
                //             }
                //         }
                //     })
                // }
            } else if (type == 2) {
                // 设置投资公司的控股状态
                // if (rootData.kg) {
                //     $.each(rootData.kg.Names, function (index, vo) {
                //         if (type == 2 && data.branchCompanyCode && data.branchCompanyCode == vo.branchCompanyCode) {
                //             data.kg = true;
                //         }
                //     })
                // }
            }
            treeId++;

        }

        // 绘制子节点连接线
        function addTampArrow(cnode, fontSize) {
            var tamp = cnode;
            console.log('cnode:',cnode)
            var Ratio = (!cnode.proportion || cnode.proportion == '0%') ? '' : cnode.proportion;
            if (Ratio) {
                Ratio = (parseFloat(cnode.proportion).toFixed(4)) * 10000 / 10000 + '%';
                tamp.ratio = Ratio;
            }
            var labelShow = (Ratio != '0%');
            cnode = {
                name: Ratio,
                symbol: "arrowdown",
                symbolSize: [10, 12],
                tooltip: {
                    show: !1
                },
                clickable: !1,
                hoverable: false,
                itemStyle: {
                    normal: {
                        color: "#0b6666",
                        borderWidth: 0,
                        label: {
                            show: labelShow,
                            position: "right",
                            textStyle: {
                                fontFamily: "MicroSoft YaHei",
                                fontSize: fontSize,
                                fontStyle: "normal",
                            },
                        }
                    },
                    emphasis: {
                        color: "#0b6666",
                        borderWidth: 0,
                        label: {
                            show: labelShow,
                            position: "right",
                            textStyle: {
                                fontFamily: "MicroSoft YaHei",
                                fontSize: fontSize,
                                fontStyle: "normal",
                            },
                        }
                    }
                },
                children: [tamp]
            }
            return cnode;
        }

        // 创建股权图的根节点
        function initTree(data, isClose) {
            if (!data) return;
            data.name = data.branchCompanyName;
            data.editable = false;
            data.labelClick = false;
            data.clickable = false;
            data.symbolSize = [data.name.length * 14 + 25, 36];
            if (data.symbolSize[0] < 120) data.symbolSize[0] = 180;
            data.symbol = 'rectangle';
            data.itemStyle = {
                normal: {
                    color: "#0b6666",
                    borderWidth: "1",
                    borderColor: "#0b6666",
                    label: {
                        show: !0,
                        position: "inside",
                        textStyle: {
                            color: '#fff',
                            fontFamily: "MicroSoft YaHei",
                            fontSize: 14,
                            fontStyle: "normal",
                        },
                    }
                },
                emphasis: {
                    color: "rgba(255,255,255,0)",
                    borderWidth: "1",
                    borderColor: "#0b666600",
                }
            };
            getNode(gudongData);
            getNode(touziData);
            function getNode(data) {
                if (!data) return;
                if (data.children && data.children.length > 0) {
                    for (var i = 0; i < data.children.length; i++) {
                        getNode(data.children[i]);
                    }
                }
                if (isClose && data.children && data.children.length > 0 && data.branchCompanyCode && data.branchCompanyCode != getQueryString("branchCompanyCode")) {
                    data._children = data.children;
                    data.children = null;
                    data.extend = 1;
                    data.symbol = 'rectangle';
                }
            }

        }

        //股权穿透图
        function drawGuquan() {
            myChart.clear();
            option = {
                title: {
                    text: '',
                },
                series: [

                ]
            };
            var roam = true;
            if (window.iframe) {
                roam = 'move';
            }
            var lineStyle = {
                width: 1,
                type: 'broken',
                color: "#aaa"
            };
            if (gudongData && gudongData.branchCompanyName) {
                option.series.push({
                    type: "tree",
                    orient: "vertical",
                    nodePadding: 25,
                    layerPadding: 45,
                    symbol: "circle",
                    roam: roam,
                    rootLocation: {
                        "x": "50%",
                        "y": "50%"
                    },
                    direction: "inverse",
                    itemStyle: {
                        normal: {
                            lineStyle: lineStyle
                        }
                    },
                    data: [gudongData]
                });
            }
            if (touziData && touziData.branchCompanyName) {
                option.series.push({
                    type: "tree",
                    orient: "vertical",
                    nodePadding: 25,
                    layerPadding: 45,
                    symbol: "circle",
                    roam: roam,
                    rootLocation: {
                        "x": "50%",
                        "y": "50%"
                    },
                    itemStyle: {
                        normal: {
                            lineStyle: lineStyle
                        }
                    },
                    data: [touziData]
                })
            }
            if (gudongData && !touziData) {
                option.series[0].rootLocation.y = '165%';
            }
            myChart.setOption(option);
            initZrender();
            animatieChart(myChart);

            var isDrag;
            var dragStartPos;
            myChart.getZrender().on("mousedown", function (param) {
                isDrag = true;
                dragStartPos = [param.event.x, param.event.y];

            });
            myChart.getZrender().on("mouseup", function (param) {
                if (dragStartPos[0] == param.event.x && dragStartPos[1] == param.event.y) {
                    isDrag = false;
                }
                dragStartPos = [];
            });

            myChart.on('click', function (e) {
                if (isDrag) return;
                if ((e.data.Org == 0 || e.data.Org == 4 || e.data.Org == 7 || e.data.Org == 8 || e.data.Org == 9) && e.data.branchCompanyCode && e.data.branchCompanyCode != showbranchCompanyCode) {
                    if (e.data.branchCompanyCode[0] == 'p') {
                        if (window.iframe) {
                            window.open('/pl/' + e.data.branchCompanyCode + '.html');
                        } else {
                            showbranchCompanyCode = e.data.branchCompanyCode;
                            // showDetail2(showbranchCompanyCode, 'company_muhou4', 'person');
                        }
                    } else {
                        if (window.iframe) {
                            window.open('/firm/' + e.data.branchCompanyCode + '.html');
                        } else {
                            showbranchCompanyCode = e.data.branchCompanyCode;
                            showDetail(showbranchCompanyCode, 'company_guquan');
                        }
                    }
                }
                if (e.data.Org == 2) {
                    if (e.data.branchCompanyCode && e.data.branchCompanyCode.length == 32) {
                        if (window.iframe) {
                            window.open('/pl/' + e.data.branchCompanyCode + '.html');
                        } else {
                            showbranchCompanyCode = e.data.branchCompanyCode;
                            // showDetail2(showbranchCompanyCode, 'company_muhou4', 'person');
                        }
                    } else {
                        window.open('/people?name=' + encodeURI(e.data.Name) + '&branchCompanyCode=' + e.data.ParentbranchCompanyCode);
                    }
                }
            });


            myChart.getZrender().on('click', function (e) {
                if (isDrag) return;
                if (e.target && e.target.clickcom) {
                    troggleTree(e.target.branchCompanyCode, e.target.treeId);
                }
                if (e.target && e.target.editcom) {
                    editTree(e.target.branchCompanyCode, e.target.treeId);
                }
            });

            var hoverName = ''
            // myChart.on('hover', function(e){
            //     if(e.data.Name&&e.data.branchCompanyName.length>10&&e.data.Name!=hoverName){
            //         hoverName = e.data.Name;
            //         $('#hoverName').text(e.data.Name);
            //         $('#hoverName').css('left',e.event.screenX-10);
            //         $('#hoverName').css('top',e.event.screenY-50);
            //         $('#hoverName').fadeIn();
            //     }
            // }); 
            // myChart.on('mouseout', function(e){
            //     hoverName = '';
            //     $('#hoverName').fadeOut();
            // }); 

            myChart.on('restore', function (param) {
                getNode(gudongData);
                getNode(touziData);
                function getNode(data) {
                    if (!data) return;
                    if (data.children && data.children.length > 0) {
                        for (var i = 0; i < data.children.length; i++) {
                            getNode(data.children[i]);
                        }
                    }
                    if (data.children && data.children.length > 0 && data.branchCompanyCode && data.branchCompanyCode != getQueryString("branchCompanyCode")) {
                        data._children = data.children;
                        data.children = null;
                        data.extend = 1;
                        //data.symbol = 'circleCross';
                    }

                }
                myChart.clear();
                myChart.setOption(option);
                initZrender();
                animatieChart(myChart);

            });

        }

        function initZrender(jietu) {
            var shapeList = myChart.getZrender().storage.getShapeList();
            for (var i = 0; i < shapeList.length; i++) {
                if (shapeList[i].clickcom || shapeList[i].ndelete) {
                    myChart.getZrender().delShape(shapeList[i].id);
                }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data && shapeList[i].style.text) {
                    shapeList[i].style.text = shapeList[i].style.text.replace(/^\s+|\s+$/g, '');
                }
            }
            for (var i = 0; i < shapeList.length; i++) {
                // if(shapeList[i]._echartsData&&shapeList[i]._echartsData._data.labelClick){
                //     var shape = new Text({
                //       style: {
                //           x: shapeList[i].rotation[1]+25,
                //           y: shapeList[i].rotation[2],
                //           text: shapeList[i]._echartsData._name,
                //           color : '#333' ,
                //           textFont:'normal 13px 微软雅黑',
                //           lineWidth :0,
                //       },
                //       highlightStyle : {
                //           lineWidth :0,
                //           strokeColor:'rgba(0,0,0,0)',
                //         }    
                //     });
                //     shape.branchCompanyCode = shapeList[i]._echartsData._data.branchCompanyCode;
                //     shape.zlevel = 1;
                //     shape.z = 4;
                //     shape.clickable = true;
                //     myChart.getZrender().addShape(shape);
                // }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.subtext) {
                    shapeList[i].style.text = shapeList[i].style.text + '\n';
                    var shapeY = shapeList[i].rotation[2] + 16;
                    if (shapeList[i]._echartsData._data.name.length > 10) {
                        shapeY = shapeList[i].rotation[2] + 16;
                    }
                    if (shapeList[i]._echartsData._data.Org == 2) {
                        shapeY = shapeList[i].rotation[2] + 11;
                    }
                    if (shapeList[i]._echartsData._data.tag) {
                        if (shapeList[i]._echartsData._data.name.length > 10) {
                            shapeY = shapeList[i].rotation[2] + 4;
                        } else {
                            shapeY = shapeList[i].rotation[2] + 1;
                        }
                    }
                    var shape = new Text({
                        style: {
                            x: shapeList[i].rotation[1],
                            y: shapeY,
                            text: shapeList[i]._echartsData._data.subtext,
                            color: '#666',
                            textFont: 'normal 11px 微软雅黑',
                            textAlign: 'center',
                            lineWidth: 0,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: '#666',
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shape.zlevel = 1;
                    shape.z = 5;
                    shape.ndelete = true;
                    shape.hoverable = false;
                    myChart.getZrender().addShape(shape);

                    
                    
                }
                console.log('shapeList[i]._echartsData----',shapeList[i]._echartsData)
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.extend && !jietu) {
                    var iconImg = '';
                    var isIE11 = (!!window.ActiveXObject || "ActiveXObject" in window);
                    if (shapeList[i]._echartsData._data.extend == 1) {
                        if (isIE11) {
                            iconImg = './images/tupu_cross.png';
                        } else {
                            iconImg = './images/tupu_cross.svg';
                        }
                    } else if (shapeList[i]._echartsData._data.extend == 2) {
                        if (isIE11) {
                            iconImg = './images/tupu_minus.png';
                        } else {
                            iconImg = './images/tupu_minus.svg';
                        }

                    }
                    var shapeY = shapeList[i].rotation[2];
                    if (shapeList[i]._echartsData._data.isTouzi) {
                        shapeY = shapeY + shapeList[i].style.height / 2;
                    } else {
                        shapeY = shapeY - shapeList[i].style.height / 2 - mbtnW;
                    }
                    var shape = new ImageShape({
                        style: {
                            image: iconImg,
                            x: shapeList[i].rotation[1] - mbtnW / 2,
                            y: shapeY,
                            width: mbtnW,
                            height: mbtnW

                        }
                    });
                    shape.branchCompanyCode = shapeList[i]._echartsData._data.branchCompanyCode;
                    shape.treeId = shapeList[i]._echartsData._data.treeId;
                    shape.zlevel = 1;
                    shape.z = 4;
                    shape.ndelete = true;
                    shape.clickcom = true;
                    shape.hoverable = true;
                    shape.clickable = true;
                    if(shapeList[i]._echartsData._data._children) {
                        var shapeNum = new Text({
                            style: {
                                x: shapeList[i].rotation[1]+25,
                                y: shapeY+12,
                                text: '【'+shapeList[i]._echartsData._data._children.length+'】',
                                color: '#0b6666',
                                textFont: 'normal 12px 微软雅黑',
                                textAlign: 'center',
                                lineWidth: 0,
                            },
                            highlightStyle: {
                                lineWidth: 0,
                                color: '#0b6666',
                                strokeColor: 'rgba(255,255,255,0)',
                            }
                        });
                        shapeNum.zlevel = 1;
                        shapeNum.z = 5;
                        shapeNum.ndelete = true;
                        shapeNum.hoverable = false;
                        myChart.getZrender().addShape(shapeNum);
                    }
                    myChart.getZrender().addShape(shape);
                }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.editable && canEditRect && !jietu) {
                    var iconImg = '';
                    var isIE11 = (!!window.ActiveXObject || "ActiveXObject" in window);
                    if (isIE11) {
                        iconImg = './images/tupu_delete.png';
                    } else {
                        iconImg = './images/tupu_delete.svg';
                    }
                    var shapeY = shapeList[i].rotation[2];
                    if (shapeList[i]._echartsData._data.isTouzi) {
                        shapeY = shapeY - shapeList[i].style.height / 2 - 9;
                    } else {
                        shapeY = shapeY - shapeList[i].style.height / 2 - 18 + 9;
                    }
                    var shape = new ImageShape({
                        style: {
                            image: iconImg,
                            x: shapeList[i].rotation[1] - 9 + 72,
                            y: shapeY,
                            width: 18,
                            height: 18

                        }
                    });
                    shape.zlevel = 1;
                    shape.z = 20;
                    shape.branchCompanyCode = shapeList[i]._echartsData._data.branchCompanyCode;
                    shape.treeId = shapeList[i]._echartsData._data.treeId;
                    shape.ndelete = true;
                    shape.editcom = true;
                    shape.hoverable = true;
                    shape.clickable = true;
                    myChart.getZrender().addShape(shape);
                }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.kzr && shapeList[i]._echartsData._data.syr) {
                    var shape = new ImageShape({
                        style: {
                            image: './images/tupu_kzrsbg.png',
                            x: shapeList[i].rotation[1] - 75,
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 38,
                            width: 150,
                            height: 44,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            strokeColor: '#fff',
                        }
                    });
                    var shapeText = new Text({
                        style: {
                            x: shapeList[i].rotation[1],
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 18,
                            textFont: 'normal 11px 微软雅黑',
                            text: '投资股东\n' + '法定代表人：' + shapeList[i]._echartsData._data.syr,
                            textAlign: 'center',
                            color: '#fff',
                            lineWidth: 0,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shape.ndelete = true;
                    shape.zlevel = 1;
                    shape.z = 8;
                    shape.hoverable = false;
                    shapeText.zlevel = 1;
                    shapeText.z = 10;
                    shapeText.ndelete = true;
                    shapeText.hoverable = false;
                    myChart.getZrender().addShape(shape);
                    myChart.getZrender().addShape(shapeText);
                } else if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.kzr) {
                    var shape = new ImageShape({
                        style: {
                            image: './images/tupu_kzrbg.png',
                            x: shapeList[i].rotation[1] - 75,
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 24,
                            width: 150,
                            height: 30,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    var shapeText = new Text({
                        style: {
                            x: shapeList[i].rotation[1],
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 12,
                            textFont: 'normal 11px 微软雅黑',
                            text: '实际控制人',
                            textAlign: 'center',
                            color: '#fff',
                            lineWidth: 0,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: '#F5A623',
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shape.ndelete = true;
                    shape.zlevel = 1;
                    shape.z = 8;
                    shape.hoverable = false;
                    shapeText.zlevel = 1;
                    shapeText.z = 10;
                    shapeText.ndelete = true;
                    shapeText.hoverable = false;
                    myChart.getZrender().addShape(shape);
                    myChart.getZrender().addShape(shapeText);

                } else if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.syr) {
                    var shape = new ImageShape({
                        style: {
                            image: './images/tupu_syrbg.png',
                            x: shapeList[i].rotation[1] - 75,
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 24,
                            width: 150,
                            height: 30,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    var shapeText = new Text({
                        style: {
                            x: shapeList[i].rotation[1],
                            y: shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 12,
                            textFont: 'normal 11px 微软雅黑',
                            text: '最终受益人：' + shapeList[i]._echartsData._data.syr,
                            textAlign: 'center',
                            color: '#fff',
                            lineWidth: 0,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: '#F5A623',
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shape.ndelete = true;
                    shape.zlevel = 1;
                    shape.z = 8;
                    shape.hoverable = false;
                    shapeText.zlevel = 1;
                    shapeText.z = 10;
                    shapeText.ndelete = true;
                    shapeText.hoverable = false;
                    myChart.getZrender().addShape(shape);
                    myChart.getZrender().addShape(shapeText);

                }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.kg) {
                    var shapeY = shapeList[i].rotation[2] - shapeList[i].style.height / 2 - 36;
                    if (shapeList[i]._echartsData._data.tag) {
                        shapeY += 9;
                    }
                    var shapeX = shapeList[i].rotation[1] - 42
                    // if(shapeList[i]._echartsData._data.ratio){
                    //     shapeX += shapeList[i]._echartsData._data.ratio.length*10
                    //     if(shapeList[i]._echartsData._data.ratio.indexOf('.') != -1){
                    //         shapeX -= 10;
                    //     }
                    // }
                    var shapeText = new Rectangle({
                        style: {
                            x: shapeX,
                            y: shapeY,
                            textFont: 'normal 11px 微软雅黑',
                            text: '控股',
                            width: 30,
                            height: 18,
                            textPosition: 'inside',
                            textAlign: 'center',
                            textColor: '#0b6666',
                            textBorderRadius: 6,
                            color: '#E7F4FF'
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: '#FD485E',
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shapeText.zlevel = 1;
                    shapeText.z = 10;
                    shapeText.ndelete = true;
                    shapeText.hoverable = false;
                    myChart.getZrender().addShape(shapeText);
                }
                if (shapeList[i]._echartsData && shapeList[i]._echartsData._data.tag) {
                    shapeList[i].style.text = shapeList[i].style.text + '\n\n';
                    var shapeColor = '#FFECCE';
                    var shapeTextColor = '#F5A623';
                    if (shapeList[i]._echartsData._data.list) {
                        shapeColor = '#DDF0FF';
                        shapeTextColor = '#0b6666';
                    }

                    var shape = new Rectangle({
                        style: {
                            x: shapeList[i].rotation[1] - 72.5,
                            y: shapeList[i].rotation[2] + shapeList[i].style.height / 2 - 22.5,
                            width: 145,
                            height: 22,
                            color: shapeColor,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: 'rgba(255,255,255,0)',
                            strokeColor: '#fff',
                        }
                    });
                    var shapeText = new Text({
                        style: {
                            x: shapeList[i].rotation[1] - 2,
                            y: shapeList[i].rotation[2] + shapeList[i].style.height / 2 - 12,
                            textFont: 'normal 12px 微软雅黑',
                            text: shapeList[i]._echartsData._data.tag,
                            textAlign: 'center',
                            color: shapeTextColor,
                            fontSize: 14,
                            lineWidth: 0,
                        },
                        highlightStyle: {
                            lineWidth: 0,
                            color: shapeTextColor,
                            strokeColor: 'rgba(255,255,255,0)',
                        }
                    });
                    shape.zlevel = 1;
                    shape.z = 4;
                    shape.ndelete = true;
                    shape.hoverable = false;
                    shapeText.zlevel = 1;
                    shapeText.z = 5;
                    shapeText.ndelete = true;
                    shapeText.hoverable = false;
                    myChart.getZrender().addShape(shape);
                    myChart.getZrender().addShape(shapeText);
                }
            }

            for (var i = 0; i < myChart.getZrender().getWidth() + 100; i += 360) {
                for (var j = 0; j < myChart.getZrender().getHeight() + 100; j += 280) {
                    var shapeSy = new ImageShape({
                        style: {
                            image: './images/shuiying6.png',
                            x: i,
                            y: j,
                            width: 360,
                            height: 280
                        }
                    });
                    shapeSy.hoverable = false;
                    shapeSy.ndelete = true;
                    myChart.getZrender().addShape(shapeSy);
                }
            }
        }


        function editTree(branchCompanyCode, tid) {
            getNode(gudongData);
            getNode(touziData);
            var dnode;
            var dIndex;
            function getNode(data) {
                if (!data) return;
                if (data.children && data.children.length > 0) {
                    for (var i = 0; i < data.children.length; i++) {
                        var cnode = data.children[i].children[0];
                        if (cnode.treeId == tid) {
                            dIndex = i;
                            dnode = data;
                            return;
                        }
                        getNode(cnode);
                    }
                }
            }
            dnode.children.splice(dIndex, 1);
            if (dnode.children.length == 0) {
                dnode.children = [];
                dnode.extend = undefined;
            }
            myChart.clear();
            myChart.setOption(option);
            initZrender();
        }

        function troggleTree(branchCompanyCode, tid) {
            // if(branchCompanyCode==getQueryString("branchCompanyCode")){
            //     return;
            // }
            getNode(gudongData);
            getNode(touziData);
            function getNode(data) {
                if (!data) return;
                if (data.branchCompanyCode && data.branchCompanyCode == branchCompanyCode && data.treeId == tid) {
                    if (data.children && data.children.length > 0) {
                        data._children = data.children;
                        data.children = null;
                        data.extend = 1;
                        //data.symbol = 'circleCross';
                    } else if (data._children) {
                        data.children = data._children;
                        data._children = null;
                        data.extend = 2;
                        ajaxtouzidata(data, branchCompanyCode);
                        ajaxgudongdata(data, branchCompanyCode);
                        //data.symbol = 'circleMinus';
                    }
                    return;
                }
                if (data.children && data.children.length > 0) {
                    for (var i = 0; i < data.children.length; i++) {
                        getNode(data.children[i]);
                    }
                }
            }
            myChart.clear();
            myChart.setOption(option);
            initZrender();
        }

        // 穿透图，全屏和非全屏按钮样式切换和功能触发
        function changeScreen(dom) {
            if (!isFullScreen()) {
                $(dom).html('<span class="screened"></span>退出');
                $('#screenArea').width('');
                $('#main').width('');
                $('#screenArea').height('');
                $('#main').height('');
                launchFullScreen($('#screenArea')[0]);
            } else {
                $(dom).html('<span class="screen"></span>全屏');
                exitFullScreen();
            }
        }

        // 展开所有节点
        function extendItem(dom) {
            if (!isExtend) {
                $(dom).html('<span class="extented"></span>收起');
                getData(false);
                isExtend = true
            } else {
                $(dom).html('<span class="extent"></span>展开');
                getData(true);
                isExtend = false
            }
            
        }
 
        // 切换全屏
        setFullScreenListener(function () {
            setTimeout(function () {
                myChart.resize();
                initZrender();
            }, 300);
        })//


        // 刷新股权穿透图
        function maoRefresh() {
            refresh();
        }

        // 刷新股权穿透图
        function refresh() {
            var ecConfig = require('echarts/config');
            myChart._messageCenter.dispatch(ecConfig.EVENT.RESTORE, null, null, myChart);
        }

        // 保存股权穿透图
        function saveImg() {
            if (isFullScreen()) {
                $('#changeScreen').html('<span class="screen"></span>全屏');
                exitFullScreen();
                setTimeout(function () {
                    jietu();
                }, 1000);

            } else {
                jietu();
            }
            // 截屏功能
            function jietu() {
                var jietuMask = document.createElement("div");
                $(jietuMask).attr('style', 'position: fixed; background: #fff; z-index: 1000; top: 0px; bottom: 0px; left: 0px; right: 0px;');
                document.body.appendChild(jietuMask);

                var width = 1440;
                var height = 900;

                var minX = 0;
                var maxX = 0;
                var minY = 300;
                var maxY = 0;
                var moveDown = 0;
                var moveRight = 0;

                var shapeList = myChart.getZrender().storage.getShapeList();
                for (var i = 0; i < shapeList.length; i++) {
                    if (shapeList[i].style && shapeList[i].style.iconType == 'rectangle') {
                        if (shapeList[i].style.x > maxX) {
                            maxX = shapeList[i].style.x;
                        }
                        if (shapeList[i].style.x < minX) {
                            minX = shapeList[i].style.x;
                        }
                        if (shapeList[i].style.y > maxY) {
                            maxY = shapeList[i].style.y;
                        }
                        if (shapeList[i].style.y < minY) {
                            minY = shapeList[i].style.y;
                        }
                    }
                }

                if ((maxX - minX + 300) > width) {
                    width = maxX - minX + 300;
                    moveRight = -(maxX + minX - myChart.getZrender().getWidth() + 146) / 2;

                }
                if ((maxY - minY + 300) > 900) {
                    height = maxY - minY + 300;
                }

                moveDown = -(maxY + minY - myChart.getZrender().getHeight()) / 2 - 85;

                var layer = myChart.getZrender().painter._layers[1];
                var bS = layer.scale.concat();
                var bP = layer.position.concat();

                layer.scale = [1, 1, 0, 0];
                layer.position = [0, 0];

                var bW = myChart.getZrender().getWidth();
                var bH = myChart.getZrender().getHeight();

                $('#main').width(width);
                $('#main').height(height);

                var zdW = myChart.getZrender().getWidth();
                var zdH = myChart.getZrender().getHeight();





                myChart.resize();

                myChart.getZrender().painter.refresh();

                initZrender(true);

                layer.position[0] = moveRight;
                layer.position[1] = moveDown;

                var shape1 = new Rectangle({
                    style: {
                        x: -1000 - moveRight,
                        y: -1000 - moveDown,
                        width: width + 1000,
                        height: height + 1000,
                        color: '#fff'
                    }
                });
                shape1.zlevel = 1;
                shape1.z = -2;
                shape1.ndelete = true;
                myChart.getZrender().addShape(shape1);


                for (var i = 0; i < width + 100; i += 360) {
                    for (var j = 0; j < height + 100; j += 280) {
                        var shapeSy = new ImageShape({
                            style: {
                                image: './images/shuiying6.png',
                                x: i - moveRight,
                                y: j - moveDown,
                                width: 360,
                                height: 280

                            }
                        });
                        shapeSy.zlevel = 1;
                        shapeSy.z = -1;
                        shapeSy.ndelete = true;
                        myChart.getZrender().addShape(shapeSy);
                    }
                }

                var shape3 = new Text({
                    style: {
                        x: width / 2 - 165 - moveRight,
                        y: height - 30 - moveDown,
                        text: '股权穿透图由雅居乐集团基于公司信息利用大数据分析引擎独家生成',
                        strokeColor: '#999',
                        color: '#999',
                        textFont: 'normal 12px 微软雅黑',
                        lineWidth: 0,
                    }
                });
                shape3.zlevel = 1;
                shape3.z = -1;
                shape3.ndelete = true;
                myChart.getZrender().addShape(shape3);

                setTimeout(function () {
                    var canvas = $('#main canvas')[1];

                    var isIE11 = (!!window.ActiveXObject || "ActiveXObject" in window);
                    if (isIE11) {
                        downloadimg(canvas);
                    } else {
                        download(canvas, 'jpg');
                    }

                    $('#main').width('100%');
                    $('#main').height(bH);
                    myChart.resize();
                    layer.scale = bS;
                    layer.position = bP;
                    myChart.getZrender().render();
                    initZrender();
                    $(jietuMask).css('display', 'none');
                }, 300);
            }
        }

        // 股权穿透图放大和缩小功能
        function maoScale(type) {
            var centerX = myChart.getZrender().getWidth() / 2;
            var centerY = myChart.getZrender().getHeight() / 2;
            var layer = myChart.getZrender().painter._layers[1];
            var x = layer.scale[0] * centerX + layer.position[0];
            var y = layer.scale[1] * centerY + layer.position[1];
            var scale = layer.scale[0];
            if (type == 1) {
                scale += 0.3;
            } else if (type == 2) {
                scale -= 0.3;
            }
            if (scale >= 0.3 && scale <= 2) {
                layer.scale[0] = scale;
                layer.scale[1] = scale;
                myChart.getZrender().render();
                layer.position[0] = x - layer.scale[0] * centerX
                layer.position[1] = y - layer.scale[1] * centerY
                myChart.getZrender().render();
            }
        }

        // 编辑股权穿透图
        function editRect(dom) {
            if (canEditRect) {
                $(dom).removeClass('active');
                canEditRect = false;
            } else {
                $(dom).addClass('active');
                canEditRect = true;
            }
            initZrender();
        }



        function ajaxtouzidata(node, branchCompanyCode) {

            if (!node.isTouzi || node.ajaxtouzi) {
                return;
            }
            $.ajax({
                url: INDEX_URL + '/cms_guquanmapinvestment',
                data: {
                    branchCompanyCode: branchCompanyCode
                },
                dataType: 'JSON',
                success: function (data) {
                    if (data.touzi && data.touzi.children.length > 0) {
                        addTreeChild(node, data);
                    }
                },
            })
        }

        function addTreeChild(node, data) {
            if (!node.children) {
                return;
            }
            $.each(node.children, function (index, vo) {
                var cnode = vo.children[0];
                $.each(data.touzi.children, function (i, ndata) {
                    if (ndata.branchCompanyCode == cnode.branchCompanyCode) {
                        if (ndata.children.length > 0) {
                            cnode.children = ndata.children;
                            transTree(cnode, 2);
                            cnode._children = cnode.children;
                            cnode.children = null;
                            cnode.extend = 1;
                        }

                    }
                })
            })
            node.ajaxtouzi = true;
            myChart.clear();
            myChart.setOption(option);
            initZrender();
        }

        //动态加载股东节点
        function ajaxgudongdata(node, branchCompanyCode) {
            if (node.isTouzi || node.ajaxgudong) {
                return;
            }
            if (branchCompanyCode == null) {
                return;
            }
            $.ajax({
                url: INDEX_URL + '/cms_guquanmapownership',
                data: {
                    branchCompanyCode: branchCompanyCode,
                    level: 2,
                },
                dataType: 'JSON',
                success: function (data) {
                    if (data.gudong && data.gudong.children.length > 0) {
                        addGudongTreeChild(node, data);
                    }
                }
            })
        }
        function addGudongTreeChild(node, data) {
            $.each(node.children, function (index, vo) {
                var cnode = vo.children[0];
                $.each(data.gudong.children, function (i, ndata) {
                    if (ndata.branchCompanyCode == cnode.branchCompanyCode && ndata.branchCompanyName.replace(/[^\X]/g, '') == cnode.branchCompanyName.replace(/[^\X]/g, '')) {
                        if (ndata.children.length > 0) {
                            cnode.children = ndata.children;
                            transTree(cnode, 1);
                            cnode._children = cnode.children;
                            cnode.children = null;
                            cnode.extend = 1;
                        }

                    }
                })
            })
            node.ajaxgudong = true;
            myChart.clear();
            myChart.setOption(option);
            initZrender(false, '');
        }




        function resizeScreen() {
            if (document.body.clientHeight > 700) {
                $('#screenArea').height(document.body.clientHeight - 66);
            } else {
                $('#screenArea').width(1000);
                $('#main').width(1000);
                $('#screenArea').height(600);
                $('#main').height(600);
            }
        }

        function popclose(dom) {
            $(dom).parent().parent().fadeOut();
            if (showbranchCompanyCode) {
                showbranchCompanyCode = '';
            }
        }

        function personImgErr() {
            var name = $(".ea_name").text();
            $('#face_oss').hide();
            $('.ea_defaultImg').show();
            $('.ea_defaultImg').text(name[0]);
        }

        if (window.iframe) {
            $('.navi-header').hide();
            $('.mao-head').hide();
            $('.tupu-toolbar').hide();
            timeoutRoam();
        }
        function timeoutRoam() {
            var roamTimer;
            var roamed = false;
            $('#main').on('mouseenter', function (e) {
                if (!roamed) {
                    roamTimer = setTimeout(function () {
                        $.each(option.series, function (i, v) {
                            v.roam = true;
                        })
                        myChart.clear();
                        myChart.setOption(option);
                        initZrender();
                        roamed = true;
                    }, 800);
                }
            })
            $('#main').on('mouseout', function (e) {
                if (roamTimer) {
                    clearTimeout(roamTimer);
                    roamTimer = null;
                }
                if (roamed) {
                    $.each(option.series, function (i, v) {
                        v.roam = 'move';
                    })
                    myChart.clear();
                    myChart.setOption(option);
                    initZrender();
                    roamed = false;
                }
            })
        }

        function downloadimg(canvas) {
            var qual = 1;
            if (canvas.width > 3000) {
                qual = 0.5;
            } else if (canvas.width > 5000) {
                qual = 0.4;
            }
            //设置保存图片的类型
            var imgdata = canvas.toDataURL('image/jpeg', qual);
            var filename = '股权穿透图_' + new Date().toLocaleDateString() + '.jpeg';
            //post(INDEX_URL + '/cms_downloadimg?filename=' + filename, { img: imgdata });
        }
        function post(URL, PARAMS) {
            var temp = document.createElement("form");
            temp.action = URL;
            temp.enctype = "multipart/form-data";
            temp.method = "post";
            temp.style.display = "none";
            for (var x in PARAMS) {
                var opt = document.createElement("textarea");
                opt.name = x;
                opt.value = PARAMS[x];
                temp.appendChild(opt);
            }
            document.body.appendChild(temp);
            temp.submit();
            return temp;
        }

        function isEnglish(str) {
            var reg = new RegExp('[a-zA-Z]+')
            return reg.test(str)
        }
        function isChinese(str) {
            var reg = new RegExp('[\u4E00-\u9FA5]+')
            return reg.test(str)
        }
        function getChinese(str) {
            if (str != null && str != "") {
                var reg = /[\u4E00-\u9FA5]/g;
                var result = str.match(reg);
                if (result) {
                    return result.join("");
                }
            }
            return "";
        }
        // 获取参数值
        function getQueryVariable(variable)
		{
			var query = window.location.search.substring(1);
			var vars = query.split("&");
			for (var i=0;i<vars.length;i++) {
					var pair = vars[i].split("=");
					if(pair[0] == variable){return pair[1];}
			}
			return(false);
		}
    </SCRIPT>

    <STYLE>
        /*详情弹窗*/
        .company-detail {
            padding: 0px;
            top: 75px;
        }

        .detail-content-wrap {
            padding: 10px 20px;
        }

        .detail-bottom {
            height: 350px;
            overflow-y: auto;
            padding-right: 3px;
        }

        .detail-title-wrap {
            margin-bottom: 10px;
        }

        .detail-title {
            color: #000000;
            font-size: 16px;
            font-weight: 600;
        }

        .detail-count {
            color: #0b6666;
            font-size: 16px;
            padding-left: 6px;
        }

        .detail-a,
        .detail-a:hover {
            color: #0b6666;
            font-size: 14px;
        }

        .detail-content {
            border: 1px solid #E4EEF6;
            padding: 12px;
            margin-bottom: 20px;
        }

        #NameBar {
            position: absolute;
            background: white;
            width: 252px;
            height: 30px;
            bottom: 362px;
            /*bottom:346px;*/
            line-height: 30px;
            z-index: 2;
            font-size: 16px;
            font-weight: 600;
        }

        #NameBar .detail-count {
            font-weight: normal;
        }

        #NameBar .detail-a {
            font-weight: normal;
            margin-right: 10px;
        }

        /**/
        #ScrollContent .detail-title-wrap a.pull-right {
            margin-right: 10px;
        }

        .marginNone {
            margin-bottom: 0px !important;
        }
    </STYLE>

    <SCRIPT id="PerDeailTpl" type="text/template">
    <div id="ScrollContent" class="m-t mao-content m-b-lg detail-bottom">
            <div class="detail-title-wrap" style="margin-top: 0px;">
                <span class="detail-title">简介</span>
            </div>
            <div class="detail-content">
                <div class="e_contentMore">
                    <div class="ea_content"><span id="des">暂无</span></div>
                    <a class="ea_bt">...展开</a>
                </div>
            </div>
            <div id="glgs" class="detail-title-wrap">
                <span class="detail-title">关联公司</span><span class="relativeInfoCount detail-count">0</span><a target="_blank" class="detail-a pull-right allRrelative">查看全部></a>
            </div>
            <table class="ntable">
                <thead><tr><th  class="tb" style="text-align: left;">名称</th><th  class="tb" style="width: 96px;">法定代表人</th></tr></thead>
                <tbody id="relativeInfoData">

                </tbody>
            </table>

            <div id="BossInfo" style="display: none;">
                <div class="detail-title-wrap">
                    <span class="detail-title">基本信息</span>
                </div>
                <table class="ntable">
                    <tbody>
                    <tr><td class="tb" style="width: 85px;">毕业院校</td><td id="biye">-</td></tr>
                    <tr><td class="tb">所学专业</td><td id="zhuanye">-</td></tr>
                    <tr><td class="tb">最高学历</td><td id="xueli">-</td></tr>
                    <tr><td class="tb">爱好</td><td id="hobby">-</td></tr>
                    <tr><td class="tb">工作单位</td><td id="companyname">-</td></tr>
                    <tr><td class="tb">职务</td><td id="job">-</td></tr>
                    </tbody>
                </table>
                <div id="edu-wrap">
                    <div class="detail-title-wrap">
                        <span class="detail-title">教育经历</span>
                    </div>
                    <div id="edu"></div>
                </div>
                <div id="everjob-wrap">
                    <div class="detail-title-wrap">
                        <span class="detail-title">工作经历</span>
                    </div>
                    <div id="everjob">

                    </div>
                </div>
                <div id="milestone-wrap">
                    <div class="detail-title-wrap">
                        <span class="detail-title">重要事件</span>
                    </div>
                    <table class="ntable">
                        <tbody id="milestone">
                        <tr><td>暂无</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="sayings-wrap">
                    <div class="detail-title-wrap">
                        <span class="detail-title">相关新闻</span>
                    </div>
                    <table class="ntable">
                        <tbody id="sayings">
                        <tr><td>暂无</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
    </div>
</SCRIPT>

    <SCRIPT>
        /*详情滚动时显示标题*/
        function scrollTitleInit() {
            // 滚动显示标题
            var showIndex = 0;
            var pos = [];
            var showWraps = [];
            var wraps = document.getElementsByClassName("detail-title-wrap");
            for (var i = 0; i < wraps.length; i++) {
                var w = wraps[i];
                var obj = { name: '', y: 0 }
                obj.name = $(w).find(".detail-title").text();
                obj.y = w.offsetTop;
                if (obj.y || i == 0) {
                    pos.push(obj);
                    showWraps.push(w);
                }
            }
            $("#NameBar").html($(showWraps[0]).html());
            $('#ScrollContent').scroll(function () {
                var top = $(this).scrollTop();
                top += 250;

                showIndex = 0;
                for (var i = 0; i < pos.length; i++) {
                    if ((i + 1) < pos.length && top < pos[i + 1].y) {
                        showIndex = i;
                        break;
                    }
                    if ((i + 1) == pos.length) {
                        showIndex = i;
                    }
                }

                $("#NameBar").html($(showWraps[showIndex]).html());
                $("#NameBar").show();
            });
        }

        /**/
        function showDetail2(branchCompanyCode, tupuUrl, type) {
            $(".company-detail").hide();

            if (type && type == 'person') {
                var url = INDEX_URL + "/boss_getDetail";
                $.ajax({
                    url: url,
                    type: 'GET',
                    data: { "branchCompanyCode": branchCompanyCode },
                    dataType: 'JSON',
                    success: function (data) {
                        if (!data.name) return;
                        $("#ScrollContent").remove();
                        // $("#ShowPerTupu").after($("#PerDeailTpl").html());

                        $("#NameBar").after($("#PerDeailTpl").html());

                        /*人物搜索里的查看图谱*/
                        if (_currentbranchCompanyCode == branchCompanyCode || !data.boss_id) {
                            $("#ShowPerTupu").attr('canshow', '0');
                            $("#ShowPerTupu").hide();
                        } else {
                            $("#ShowPerTupu").attr('branchCompanyCode', branchCompanyCode);
                            $("#ShowPerTupu").attr('canshow', '1');
                            $("#ShowPerTupu").show();
                        }
                        /*muhou3 muhou4里的查看图谱*/
                        if (_currentbranchCompanyCode == branchCompanyCode) {
                            $("#ShowPerTupuA").parent().hide();
                        } else {
                            $("#ShowPerTupuA").parent().show();
                            $("#ShowPerTupuA").attr("href", "/company_muhou4?branchCompanyCode=" + branchCompanyCode + "&name=" + encodeURIComponent(data.name));
                        }

                        $("#BossInfo").hide();

                        $('.allRrelative').attr('href', '/pl/' + branchCompanyCode);

                        $('.ea_name').text(data.name ? data.name : '-');
                        $('.ea_name').attr('href', '/pl/' + branchCompanyCode);


                        $('.ea_defaultImg').text();
                        $('.ea_defaultImg').hide();
                        $('#face_oss').show();
                        if (data.boss_id) {
                            $('#face_oss').attr('src', data.face_oss);
                        } else {
                            $('#face_oss').attr('src', 'https://co-image.qichacha.com/PersonImage/' + branchCompanyCode + '.jpg');
                        }

                        $('#PerCom').text(data.companyname ? data.companyname : '-');
                        $('#PerJob').text(data.job ? data.job : '-');
                        if (data.companykey) {
                            $('#PerCom').attr('href', '/firm/' + data.companykey);
                        } else {
                            $('#PerCom').attr('href', '');
                        }
                        $("#des").parent().parent().removeAttr('style');

                        $("#des").text(data.des ? data.des : '暂无');
                        /*简介没有时隐藏*/
                        if (!data.des) {
                            var desWrap = $("#des").parent().parent().parent();
                            desWrap.siblings('.detail-title-wrap').eq(0).remove();
                            desWrap.remove();
                        }


                        $(".relativeInfoCount").text(data.relativeInfoCount ? data.relativeInfoCount : '0');

                        $("#relativeInfoData").html('');
                        if (data.relativeInfoData && data.relativeInfoData.length) {
                            var html = '';
                            data.relativeInfoData.forEach(function (obj, index) {
                                obj.Name = obj.Name ? obj.Name : '-';
                                obj.OperName = obj.OperName ? obj.OperName : '-';
                                if (index < 10) {
                                    html += '<tr><td>' +
                                        '<a class="c_a" target="_blank" href="/firm/' + obj.branchCompanyCode + '"><span>' + obj.Name + '</span></a></td>' +
                                        '<td style="text-align: center;">' + obj.OperName + '</td></tr>'
                                }
                            })
                            $("#relativeInfoData").html(html);
                        }

                        if (data.boss_id) { // 热门人物
                            $("#BossInfo").show();
                            $('#biye').text(data.biye ? data.biye : '-');
                            $('#zhuanye').text(data.zhuanye ? data.zhuanye : '-');
                            $('#xueli').text(data.xueli ? data.xueli : '-');
                            $('#hobby').text(data.hobby ? data.hobby : '-');
                            $('#companyname').text(data.companyname ? data.companyname : '-');
                            $('#job').text(data.job ? data.job : '-');
                            /*教育经历*/
                            $('#edu').html('');
                            var edus = '';
                            if (data.edu) {
                                edus = JSON.parse(data.edu);
                            }
                            if (data.edu && edus && edus.length) {
                                var html = '';
                                edus.forEach(function (obj) {
                                    if (!obj.TimeQuantum) { obj.TimeQuantum = '-' }
                                    if (!obj.Diplomas) { obj.Diplomas = '-' }
                                    if (!obj.University) { obj.University = '-' }
                                    if (!obj.Major) { obj.Major = '-' }
                                    html += '<table class="ntable"><tbody>' +
                                        '<tr><td class="tb" style="width: 85px;">教育时间</td><td >' + obj.TimeQuantum + '</td></tr>' +
                                        '<tr><td class="tb">学历</td><td>' + obj.Diplomas + '</td></tr>' +
                                        '<tr><td class="tb">毕业院校</td><td>' + obj.University + '</td></tr>' +
                                        '<tr><td class="tb">所学专业</td><td>' + obj.Major + '</td></tr>' +
                                        '</tbody></table>';
                                })
                                $('#edu').html(html);
                                $('#edu-wrap').show();
                            } else {
                                $('#edu-wrap').hide();
                            }
                            /*工作经历*/
                            $('#everjob').html('');
                            var jobs = '';
                            if (data.everjob) {
                                jobs = JSON.parse(data.everjob);
                            }
                            if (data.everjob && jobs && jobs.length) {
                                var html = '';
                                jobs.forEach(function (obj) {
                                    if (!obj.TimeQuantum) { obj.TimeQuantum = '-' }
                                    if (!obj.Job) { obj.Job = '-' }
                                    if (!obj.CompanyName) { obj.CompanyName = '-' }
                                    if (!obj.Abstract) { obj.Abstract = '-' }
                                    html += '<table class="ntable"><tbody>' +
                                        '<tr><td class="tb" style="width: 85px;">工作时间</td><td >' + obj.TimeQuantum + '</td></tr>' +
                                        '<tr><td class="tb">职位</td><td>' + obj.Job + '</td></tr>' +
                                        '<tr><td class="tb">工作单位</td><td>' + obj.CompanyName + '</td></tr>' +
                                        '<tr><td class="tb">描述</td><td>' +
                                        '<div class="e_contentMore">' +
                                        '<div class="ea_content">' + obj.Abstract + '</div>' +
                                        '<a class="ea_bt">...展开</a>' +
                                        '</div>' +
                                        '</td></tr>' +
                                        '</tbody></table>';
                                })
                                $('#everjob').html(html);
                                $('#everjob-wrap').show();
                            } else {
                                $('#everjob-wrap').hide();
                            }
                            /*重要事件*/
                            $('#milestone').html('');
                            var milestones = '';
                            if (data.milestone) {
                                milestones = JSON.parse(data.milestone);
                            }
                            if (data.milestone && milestones && milestones.length) {
                                var html = '';
                                milestones.forEach(function (obj) {
                                    if (!obj.Milestone) { obj.Milestone = '-' }
                                    html += '<tr><td><div class="e_contentMore">' +
                                        '<div class="ea_content">' + obj.Milestone + '</div>' +
                                        '<a class="ea_bt">...展开</a>' +
                                        '</div></td></tr>';
                                })
                                $('#milestone').html(html);
                                $('#milestone-wrap').show();
                            } else {
                                $('#milestone-wrap').hide();
                            }
                            /*相关新闻*/
                            $('#sayings').html('');
                            var sayings = '';
                            if (data.sayings) {
                                sayings = JSON.parse(data.sayings);
                            }
                            if (data.sayings && sayings && sayings.length) {
                                var html = '';
                                sayings.forEach(function (obj) {
                                    if (!obj.TimeQuantum) { obj.TimeQuantum = '-' }
                                    if (!obj.Job) { obj.Job = '-' }
                                    if (!obj.CompanyName) { obj.CompanyName = '-' }
                                    if (!obj.Abstract) { obj.Abstract = '-' }
                                    obj.Link = obj.Link.replace('http://', '');
                                    obj.Link = obj.Link.replace('https://', '');
                                    html += '<tr><td><a target="_blank" href="http://' + obj.Link + '">' + obj.Title + '</a></td></tr>';
                                })
                                $('#sayings').html(html);
                                $('#sayings-wrap').show();
                            } else {
                                $('#sayings-wrap').hide();
                            }
                        }

                        $("#person-detail").fadeIn();

                        /*e_contentMore元素初始化*/
                        $(".e_contentMore").each(function () {
                            var wrap = $(this);
                            var content = wrap.find(".ea_content");
                            var bt = wrap.find(".ea_bt");

                            var wrapHeight = wrap.height();
                            var contentHeight = content.height();
                            if (contentHeight > wrapHeight) {
                                bt.show();
                            } else {
                                bt.hide();
                            }
                            bt.click(function () {
                                if (bt.text() == "收起") {
                                    wrap.css({ maxHeight: wrapHeight });
                                    bt.text("...展开");
                                } else {
                                    wrap.css({ maxHeight: (contentHeight + 20), height: (contentHeight + 20) });
                                    bt.text("收起");
                                }

                                scrollTitleInit();
                            });
                        })

                        /*样式处理,bug #2191-1*/
                        if ($("#BossInfo").is(':hidden')) {
                            $("#glgs").siblings('.ntable').addClass('marginNone');
                        } else {
                            $("#glgs").siblings('.ntable').removeClass('marginNone');
                        }

                        /*$('#ScrollContent').slimScroll({
                            wheelStep: 1
                        });*/

                        scrollTitleInit();

                    },
                    error: function (data) {
                        console.log(data);
                    }
                });
            } else {
                var url = INDEX_URL + "/more_findRelationsDetail";
                $.ajax({
                    url: url,
                    type: 'GET',
                    data: { "branchCompanyCode": branchCompanyCode },
                    dataType: 'JSON',
                    success: function (data) {
                        if (data.Status != 200) {
                            return;
                        }
                        var companyDetail = $('#company-detail');
                        companyDetail.find('.mao-img').attr("src", data.Result.ImageUrl);
                        companyDetail.find('.mao-company-name').text(data.Result.Name);
                        companyDetail.find('.mao-company-status').text(data.Result.ShortStatus || '-');
                        if (data.Result.Oper && data.Result.Oper.Name) {
                            if (data.Result.Oper.branchCompanyCode) {
                                if (data.Result.Oper.branchCompanyCode[0] == 'p') {
                                    companyDetail.find('.mao-oper').html('<a target="_blank" href="/pl/' + data.Result.Oper.branchCompanyCode + '.html">' + data.Result.Oper.Name + '</a>');
                                } else {
                                    companyDetail.find('.mao-oper').html('<a target="_blank" href="/firm/' + data.Result.Oper.branchCompanyCode + '.html">' + data.Result.Oper.Name + '</a>');
                                }
                            } else {
                                companyDetail.find('.mao-oper').html('<a target="_blank" rel="nofollow" href="/people?name=' + encodeURI(data.Result.Oper.Name) + '&branchCompanyCode=' + branchCompanyCode + '">' + data.Result.Oper.Name + '</a>');
                            }
                            if (data.Result.Oper.OperType == 1) {
                                companyDetail.find('.mao-oper').prev().text('法定代表人：');
                            } else if (data.Result.Oper.OperType == 2) {
                                companyDetail.find('.mao-oper').prev().text('执行事务合伙人：');
                            } else if (data.Result.Oper.OperType == 3) {
                                companyDetail.find('.mao-oper').prev().text('负责人：');
                            } else if (data.Result.Oper.OperType == 4) {
                                companyDetail.find('.mao-oper').prev().text('经营者：');
                            } else if (data.Result.Oper.OperType == 5) {
                                companyDetail.find('.mao-oper').prev().text('投资人：');
                            } else if (data.Result.Oper.OperType == 6) {
                                companyDetail.find('.mao-oper').prev().text('董事长：');
                            } else if (data.Result.Oper.OperType == 7) {
                                companyDetail.find('.mao-oper').prev().text('理事长：');
                            }
                        } else {
                            companyDetail.find('.mao-oper').text('-');
                        }

                        companyDetail.find('.mao-ziben').text(data.Result.RegistCapi || '-');
                        companyDetail.find('.mao-date').text((data.Result.StartDate || ''));
                        companyDetail.find('.mao-company-name').attr("href", "firm/" + branchCompanyCode + ".html");
                        if (!tupuUrl) {
                            tupuUrl = 'company_relation';
                        }
                        companyDetail.find('.mao-tupu-link').attr("href", tupuUrl + "?branchCompanyCode=" + branchCompanyCode + "&name=" + encodeURIComponent(data.Result.Name));
                        //companyDetail.find('.mao-tupu-link').attr("onclick","zhugeTrack(\'图谱页面-侧边栏企业信息-查看图谱\')");
                        companyDetail.find('.close').click(function () {
                            companyDetail.fadeOut();
                        });

                        if (_currentbranchCompanyCode == branchCompanyCode) {
                            $(".mao-tupu-link").parent().hide();
                        } else {
                            $(".mao-tupu-link").parent().show();
                        }

                        var noData = '<div class="mao-noresult"> <p ><img src="./images/nodata.png"></p>暂无信息</div>';

                        //股东
                        if (data.Result.Partners && data.Result.Partners.length > 0) {
                            var html = '<table class="ntable">';
                            html += "<thead><tr><th style='text-align: left'>名称</th><th>类型</th></tr></thead>";
                            for (var i = 0; i < data.Result.Partners.length; i++) {
                                html += "<tr>";
                                if (data.Result.Partners[i].branchCompanyCode) {
                                    if (data.Result.Partners[i].branchCompanyCode[0] == 'p') {
                                        html += '<td><a onclick="" target="_blank" href="/pl/' + data.Result.Partners[i].branchCompanyCode + '.html">' + data.Result.Partners[i].StockName + '</a></td>';
                                    } else {
                                        html += '<td><a onclick="" target="_blank" href="/firm/' + data.Result.Partners[i].branchCompanyCode + '.html">' + data.Result.Partners[i].StockName + '</a></td>';
                                    }
                                } else {
                                    if (data.Result.Partners[i].StockName.length > 3) {
                                        html += "<td>" + data.Result.Partners[i].StockName + "</td>";
                                    } else {
                                        html += '<td><a onclick="" target="_blank" rel="nofollow" href="/people?name=' + encodeURI(data.Result.Partners[i].StockName) + '&branchCompanyCode=' + branchCompanyCode + '">' + data.Result.Partners[i].StockName + '</a></td>';
                                    }
                                }
                                html += "<td>" + (data.Result.Partners[i].StockType || "-") + "</td>";
                                html += "</tr>";
                            }
                            html += '</table>'

                            companyDetail.find('.gudong-list').html(html);


                        } else {
                            companyDetail.find('.gudong-list').html(noData);
                        }

                        //投资
                        if (data.Result.touziList && data.Result.touziList.length > 0) {

                            var html = '<table class="ntable">';
                            html += "<thead><tr><th  style='text-align: left'>名称</th></tr></thead>";
                            for (var i = 0; i < data.Result.touziList.length; i++) {
                                html += "<tr>";
                                html += "<td><a onclick='' href='/firm/" + data.Result.touziList[i].branchCompanyCode + ".html' target='_blank'>" + data.Result.touziList[i].Name + "</a></td>";
                                html += "</tr>";
                            }
                            html += '</table>';
                            companyDetail.find('.touzi-list').html(html);
                        } else {
                            companyDetail.find('.touzi-list').html(noData);
                        }

                        //成员
                        if (data.Result.Employees && data.Result.Employees.length > 0) {
                            var html = '<table class="ntable">';
                            html += "<thead><tr><th  style='text-align: left'>名称</th><th>类型</th></tr></thead>";
                            for (var i = 0; i < data.Result.Employees.length; i++) {
                                html += "<tr>";
                                if (data.Result.Employees[i].branchCompanyCode && data.Result.Employees[i].branchCompanyCode[0] == 'p') {
                                    html += '<td><a onclick="" target="_blank" href="/pl/' + data.Result.Employees[i].branchCompanyCode + '.html">' + data.Result.Employees[i].Name + '</a></td>';
                                } else {
                                    html += '<td><a onclick="" target="_blank" rel="nofollow" href="/people?name=' + encodeURI(data.Result.Employees[i].Name) + '&branchCompanyCode=' + branchCompanyCode + '">' + data.Result.Employees[i].Name + '</a></td>';
                                }
                                html += "<td>" + (data.Result.Employees[i].Job || "-") + "</td>";
                                html += "</tr>";
                            }
                            html += '</table>';
                            companyDetail.find('.member-list').html(html);

                        } else {
                            companyDetail.find('.member-list').html(noData);
                        }

                        $("#company-detail").fadeIn();
                        companyDetail.find('.mao-tab-content').slimScroll({
                            wheelStep: 1
                        });
                    },
                    error: function (data) {
                        console.log(data);
                    }
                });
            }
        }



        /*ie兼容*/
        var isIE = (!!window.ActiveXObject || "ActiveXObject" in window);
        if (isIE) {
            $("#NameBar").css({ 'width': '270px' });
        }
    </SCRIPT>

    <STYLE type="text/css">
        .step2 {
            display: none;
        }
    </STYLE>
    <LINK href="./files/vip-modal.css" rel="stylesheet" type="text/css">

    <DIV tabindex="-1" class="modal fade" id="vipModal" role="dialog" aria-hidden="true" aria-labelledby="myModalLabel">
        <DIV class="modal-dialog nmodal">
            <DIV class="modal-content">
                <DIV class="vip-top"><BUTTON class="close" type="button" data-dismiss="modal"><SPAN
                            aria-hidden="true">×</SPAN><SPAN class="sr-only">x</SPAN></BUTTON>
                    <DIV class="vip-title">
                        <DIV class="title">立即成为VIP</DIV>
                        <DIV class="sub-title"><SPAN>更多特权 超值服务</SPAN><A href="https://www.qcc.com/vip"
                                rel="nofollow">全部特权&gt;</A></DIV>
                    </DIV>
                    <DIV class="vip-buy-panel">
                        <DIV class="vip-year-list clearfix">
                            <DIV class="vip-kuang vip-year active" data-price="720" data-year="3" data-id="17">
                                <DIV class="price"><SPAN>720元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    3年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>0.65</SPAN>元</DIV>
                                <DIV class="vip-rec"></DIV>
                            </DIV>
                            <DIV class="vip-kuang vip-year" data-price="540" data-year="2" data-id="7">
                                <DIV class="price"><SPAN>540元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    2年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>0.73</SPAN>元</DIV>
                            </DIV>
                            <DIV class="vip-kuang vip-year" data-price="360" data-year="1" data-id="6">
                                <DIV class="price"><SPAN>360元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    1年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>0.98</SPAN>元</DIV>
                            </DIV>
                        </DIV>
                        <DIV class="step1 m-t-md"><A class="vip-btn" onclick="modalJumpVip()">立即开通</A>
                            <DIV class="vip-publicity">支付后可开发票</DIV>
                        </DIV>
                        <FORM class="pay-form vip-pay-info step2" role="form" action="/order_pay" method="post"
                            target="aliPayFrame">
                            <DIV class="clearfix"><SPAN class="pre">购买账号：</SPAN><SPAN class="after">15365067296</SPAN>
                            </DIV>
                            <DIV class="clearfix coupon-drop"><SPAN class="pre">优惠券：</SPAN><SPAN class="after drop"
                                    data-toggle="dropdown"><SPAN class="couponText">暂无优惠券</SPAN><SPAN
                                        class="caret"></SPAN></SPAN>
                                <UL class="dropdown-menu couponList">
                                    <LI><SPAN class="coupon-type">暂无优惠券</SPAN> </LI>
                                </UL>
                            </DIV>
                            <DIV class="clearfix  m-b-xs"><SPAN class="pre">实付金额：</SPAN><SPAN
                                    class="after vip-pay payYear">¥720.00</SPAN>
                            </DIV><INPUT name="order_type" type="hidden" value="2">
                            <INPUT name="goods_id" type="hidden" value="17"> <INPUT name="pay_type" type="hidden"
                                value="2">
                            <INPUT name="vip_from" type="hidden"> <INPUT name="coupon_code" type="hidden">
                            <INPUT class="btn btn-primary packages-btn" style="display: none;" type="submit"
                                value="立即支付">
                        </FORM>
                    </DIV>
                </DIV>
                <DIV class="vip-pay-container clearfix">
                    <DIV class="step1"><IMG class="demo-img" src="./files/fxsm.png">
                    </DIV>
                    <DIV class="step2">
                        <DIV class="vip-payj-left">
                            <DIV class="pay-type pay-type-wx active" onclick="checkPay(2)"></DIV>
                            <DIV class="pay-type pay-type-ali m-t-xs" onclick="checkPay(1)"></DIV>
                            <DIV class="m-t-lg">
                                <P>1.完成支付后可在我的-我的发票中申请发票</P>
                                <P>2.VIP会员自支付完成之时起5分钟内生效</P>
                            </DIV>
                        </DIV>
                        <DIV class="vip-payj-qrcode">
                            <DIV class="wx_pay_box">
                                <DIV class="wx_pay_img" id="wx_pay_img"></DIV><IMG class="pay-load"
                                    src="./files/preloader.gif">
                            </DIV>
                            <DIV class="ali_pay_box" loading-img="./images/preloader.gif"><IMG class="pay-load"
                                    src="./files/preloader.gif"></DIV>
                        </DIV>
                    </DIV>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
    <DIV tabindex="-1" class="modal fade" id="svipModal" role="dialog" aria-hidden="true"
        aria-labelledby="myModalLabel">
        <DIV class="modal-dialog nmodal">
            <DIV class="modal-content">
                <DIV class="vip-top svip"><BUTTON class="close" type="button" data-dismiss="modal"><SPAN
                            aria-hidden="true">×</SPAN><SPAN class="sr-only">x</SPAN></BUTTON>
                    <DIV class="vip-title">
                        <DIV class="title">立即成为SVIP</DIV>
                        <DIV class="sub-title"><SPAN>更多特权 超值服务</SPAN><A href="https://www.qcc.com/vip_svip"
                                rel="nofollow">全部特权&gt;</A></DIV>
                    </DIV>
                    <DIV class="vip-buy-panel">
                        <DIV class="vip-year-list clearfix">
                            <DIV class="vip-kuang vip-year active" data-price="3600" data-year="3" data-id="33">
                                <DIV class="price"><SPAN>3600元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    3年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>3.28</SPAN>元</DIV>
                                <DIV class="vip-rec"></DIV>
                            </DIV>
                            <DIV class="vip-kuang vip-year" data-price="2700" data-year="2" data-id="32">
                                <DIV class="price"><SPAN>2700元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    2年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>3.69</SPAN>元</DIV>
                            </DIV>
                            <DIV class="vip-kuang vip-year" data-price="1800" data-year="1" data-id="31">
                                <DIV class="price"><SPAN>1800元</SPAN> <SPAN class="vip-pay">/</SPAN>
                                    1年 </DIV>
                                <DIV class="day-price">每天仅需<SPAN>4.93</SPAN>元</DIV>
                            </DIV>
                        </DIV>
                        <DIV class="step1 m-t-md"><A class="vip-btn" onclick="modalJumpVip()">立即开通</A>
                            <DIV class="vip-publicity">支付后可开发票</DIV>
                        </DIV>
                        <FORM class="pay-form vip-pay-info step2" role="form" action="/order_pay" method="post"
                            target="aliPayFrameSVIP">
                            <DIV class="clearfix"><SPAN class="pre">购买账号：</SPAN><SPAN class="after">15365067296</SPAN>
                            </DIV>
                            <DIV class="clearfix coupon-drop"><SPAN class="pre">优惠券：</SPAN><SPAN class="after drop"
                                    data-toggle="dropdown"><SPAN class="couponText">暂无优惠券</SPAN><SPAN
                                        class="caret"></SPAN></SPAN>
                                <UL class="dropdown-menu couponList">
                                    <LI><SPAN class="coupon-type">暂无优惠券</SPAN> </LI>
                                </UL>
                            </DIV>
                            <DIV class="clearfix m-b-xs" style="display: none;"><SPAN class="pre">原方案抵扣：</SPAN><SPAN
                                    class="after text-gray deduction">-￥1</SPAN>
                            </DIV>
                            <DIV class="clearfix  m-b-xs"><SPAN class="pre">实付金额：</SPAN><SPAN
                                    class="after vip-pay payYear">¥3600.00</SPAN>
                            </DIV><INPUT name="order_type" type="hidden" value="7">
                            <INPUT name="goods_id" type="hidden" value="33"> <INPUT name="pay_type" type="hidden"
                                value="2">
                            <INPUT name="vip_from" type="hidden"> <INPUT name="coupon_code" type="hidden">
                            <INPUT class="btn btn-primary packages-btn" style="display: none;" type="submit"
                                value="立即支付">
                        </FORM>
                    </DIV>
                </DIV>
                <DIV class="vip-pay-container clearfix">
                    <DIV class="step1"><IMG class="demo-img" src="./files/fxsm.png">
                    </DIV>
                    <DIV class="step2">
                        <DIV class="vip-payj-left">
                            <DIV class="pay-type pay-type-wx active" onclick="checkPay(2)"></DIV>
                            <DIV class="pay-type pay-type-ali m-t-xs" onclick="checkPay(1)"></DIV>
                            <DIV class="m-t-lg">
                                <P>1.完成支付后可在我的-我的发票中申请发票</P>
                                <P>2.支付完成之时起5分钟内生效</P>
                            </DIV>
                        </DIV>
                        <DIV class="vip-payj-qrcode">
                            <DIV class="wx_pay_box">
                                <DIV class="wx_pay_img" id="wx_pay_img_svip"></DIV><IMG class="pay-load"
                                    src="./files/preloader.gif">
                            </DIV>
                            <DIV class="ali_pay_box" loading-img="./images/preloader.gif"><IMG class="pay-load"
                                    src="./files/preloader.gif"></DIV>
                        </DIV>
                    </DIV>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
    <SCRIPT src="./files/pay.js" type="text/javascript"></SCRIPT>

    <SCRIPT type="text/javascript">
        var vipModalTitle;
        var userid = '2972f7c3461753f9e13f6f8486a8b270';
        var $cmodal;

        var isPayShow = false;
        var wxOrderStatus = 0;
        var wxOrderCode = '';
        var wxpayLoad = false;
        var alipayLoad = false;
        var cPayType = 2;
        var isModalShow = true;
        var cGoods_id = "17";
        var cYear = "3";
        var cPrice = "720";
        var vType = 'vip';
        var cDeduction = 0;

        function showVipModal(title, subTitle, img, linkName, linkUrl, isStep2) {
            //        alert(img);
            if (img == 'kzrt') {
                img = 'kzrt2';
            }
            if (!userid) {
                getCaptcha();
                $('#loginModal').modal('show');
                return;
            }
            $cmodal = $("#vipModal");
            $cmodal.find("input[name='vip_from']").val('');
            vType = 'vip';

            if (!cPrice) {
                cGoods_id = "17";
                cYear = "3";
                cPrice = "720";
            }

            $cmodal.find('.step1').show();
            $cmodal.find('.step2').hide();

            if (title) {
                $cmodal.find('.vip-title .title').text(title);
                //vipModalTitle = title;
            } else {
                $cmodal.find('.vip-title .title').text('立即成为VIP');
            }
            if (subTitle) {
                $cmodal.find('.vip-title .sub-title span').text(subTitle);
            } else {
                $cmodal.find('.vip-title .sub-title span').text('更多特权 超值服务');
            }
            if (title == '同电话企业') {
                $cmodal.find("input[name='vip_from']").val('73');
            } else if (title == '同地址企业') {
                $cmodal.find("input[name='vip_from']").val('74');
            }
            if (img) {
                if (title == '董监高投资任职及风险报告') {
                    $cmodal.find("input[name='vip_from']").val('57');
                } else if (title == '递名片') {
                    $cmodal.find("input[name='vip_from']").val('62');
                }
                if (img == 'gqjg') {
                    $cmodal.find("input[name='vip_from']").val('53');
                } else if (img == 'cxjg') {
                    $cmodal.find("input[name='vip_from']").val('46');
                } else if (img == 'fxsm') {
                    $cmodal.find("input[name='vip_from']").val('43');
                } else if (img == 'gqctt') {
                    $cmodal.find("input[name='vip_from']").val('33');
                    img = 'default';
                } else if (img == 'qyxyb') {
                    $cmodal.find("input[name='vip_from']").val('58');
                    img = 'default';
                } else if (img == 'dxssy') {
                    $cmodal.find("input[name='vip_from']").val('26');
                } else if (img == 'gjsx') {
                    $cmodal.find("input[name='vip_from']").val('12');
                } else if (img == 'gqlj') {
                    $cmodal.find("input[name='vip_from']").val('9');
                } else if (img == 'gdhm') {
                    $cmodal.find("input[name='vip_from']").val('8');
                } else if (img == 'lbcx') {
                    $cmodal.find("input[name='vip_from']").val('48');
                } else if (img == 'fxdt') {
                    $cmodal.find("input[name='vip_from']").val('47');
                } else if (img == 'qqhb') {
                    $cmodal.find("input[name='vip_from']").val('56');
                } else if (img == 'djgr') {
                    $cmodal.find("input[name='vip_from']").val('44');
                } else if (img == 'gjsx2') {
                    $cmodal.find("input[name='vip_from']").val('59');
                    img = 'gjsx';
                } else if (img == 'cxjg2') {
                    $cmodal.find("input[name='vip_from']").val('60');
                    img = 'cxjg';
                } else if (img == 'gdhm2') {
                    $cmodal.find("input[name='vip_from']").val('61');
                    img = 'gdhm';
                } else if (img == 'fxsm2') {
                    $cmodal.find("input[name='vip_from']").val('70');
                    img = 'fxsm';
                } else if (img == 'fxsmC') {
                    $cmodal.find("input[name='vip_from']").val('76');
                    img = 'fxsm';
                } else if (img == 'fxsmP') {
                    $cmodal.find("input[name='vip_from']").val('77');
                    img = 'fxsm';
                } else if (img == 'plcx') {
                    $cmodal.find("input[name='vip_from']").val('65');
                } else if (img == 'zgx') {
                    $cmodal.find("input[name='vip_from']").val('69');
                } else if (img == 'lsglxx') {
                    $cmodal.find("input[name='vip_from']").val('71');
                    img = 'default';
                }

                if (title == '风险监控') {
                    var imgUrl = "./images/vip/fxsm2.png";
                    $cmodal.find(".demo-img").attr("src", imgUrl);
                } else {
                    var imgUrl = "./images/vip/" + img + ".png";
                    $cmodal.find(".demo-img").attr("src", imgUrl);
                }
            } else {
                var imgUrl = "./images/vip/default.png";
                $cmodal.find(".demo-img").attr("src", imgUrl);
            }
            if (linkName && linkUrl) {
                $cmodal.find(".vip-demo-link").show();
                $cmodal.find(".vip-demo-link").text(linkName + '>');
                $cmodal.find(".vip-demo-link").attr('href', linkUrl);
            } else {
                $cmodal.find(".vip-demo-link").hide();
            }
            if (isStep2) {
                $("#vipModal .step1").hide();
                $("#vipModal .step2").show();
                strartBuy();
                isPayShow = true;
            }

            $cmodal.modal('show');

            // 嵌入的关闭
            $(".vip-insert-wrap .step1").show();
            $(".vip-insert-wrap .step2").hide();
        }

        function showSVipModal(title, subTitle, img, linkName, linkUrl, isStep2) {
            if (!userid) {
                getCaptcha();
                $('#loginModal').modal('show');
                return;
            }
            $cmodal = $("#svipModal");
            vType = 'svip';

            if (!cPrice) {
                cGoods_id = "33";
                cYear = "3";
                cPrice = "3600";
            }
            $cmodal.find('.step1').show();
            $cmodal.find('.step2').hide();

            if (title) {
                $cmodal.find('.vip-title .title').text(title);
                //vipModalTitle = title;
            } else {
                $cmodal.find('.vip-title .title').text('立即成为SVIP');
            }
            if (subTitle) {
                $cmodal.find('.vip-title .sub-title span').text(subTitle);
            } else {
                $cmodal.find('.vip-title .sub-title span').text('更多特权 超值服务');
            }
            if (img) {
                if (img == 'plsy') {
                    $cmodal.find("input[name='vip_from']").val('66');
                } else if (img == 'plbg') {
                    $cmodal.find("input[name='vip_from']").val('67');
                } else if (img == 'yqgj') {
                    $cmodal.find("input[name='vip_from']").val('75');
                }
                if (title == '风险监控') {
                    var imgUrl = "./images/vip/ldjk.png";
                    $cmodal.find(".demo-img").attr("src", imgUrl);
                } else {
                    var imgUrl = "./images/vip/" + img + ".png";
                    $cmodal.find(".demo-img").attr("src", imgUrl);
                }
            } else {
                var imgUrl = "./images/vip/default.png";
                $cmodal.find(".demo-img").attr("src", imgUrl);
            }
            if (linkName && linkUrl) {
                $cmodal.find(".vip-demo-link").show();
                $cmodal.find(".vip-demo-link").text(linkName + '>');
                $cmodal.find(".vip-demo-link").attr('href', linkUrl);
            } else {
                $cmodal.find(".vip-demo-link").hide();
            }

            /*if(isStep2){
                $("#vipModal .step1").hide();
                $("#vipModal .step2").show();
                strartBuy();
            }*/

            $cmodal.modal('show');

            // 嵌入的关闭
            $(".vip-insert-wrap .step1").show();
            $(".vip-insert-wrap .step2").hide();
        }

        $('#vipModal,#svipModal').on('hide.bs.modal', function () {
            clearPay();
            isPayShow = false;
        })

        $('#vipModal .vip-year-list .vip-kuang,#svipModal .vip-year-list .vip-kuang').on('click', function () {
            changeYear($(this).attr('data-id'), $(this).attr('data-year'), $(this).attr('data-price'), this);
            var couponCode = $cmodal.find("input[name='coupon_code']").val();
            if (couponCode == '') {
                //checkPay(cPayType);
            }
        });

        function modalJumpVip() {
            isPayShow = true;

            strartBuy();

            $cmodal.find('.step1').hide();
            $cmodal.find('.step2').show();
            zhugeTrack('开通VIP', { '立即开通点击来源': $cmodal.find('.vip-title .title').text() });
            /*
            location.href = INDEX_URL+'/vip?goods_id='+$("input[name='goods_id']").val();
            if(vipModalTitle){
                //zhugeTrack(vipModalTitle.split(' ')[0]+'-开通VIP');
            }else{
                //zhugeTrack('VIP弹框-开通VIP');
            }*/
        }


        var siModel = null;
        function strartBuy() {
            if (typeof siModel != 'undefined' && siModel) {
                clearInterval(siModel);
                siModel = null;
            }
            if (typeof siInsert != 'undefined' && siInsert) {
                clearInterval(siInsert);
                siInsert = null;
            }
            siModel = setInterval(function () {
                getWxPayStatus();
            }, 3000);
            //checkPay(cPayType);
            if (userGroupid == 43) {
                getdeduction();
            }
            setTimeout(function () {
                getcouponlist(cGoods_id);

            }, 500);
        }
    </SCRIPT>
</BODY>

</HTML>